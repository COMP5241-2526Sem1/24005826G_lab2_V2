"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/genai/chat/route";
exports.ids = ["app/api/genai/chat/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "node:buffer":
/*!******************************!*\
  !*** external "node:buffer" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:buffer");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:http":
/*!****************************!*\
  !*** external "node:http" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:http");

/***/ }),

/***/ "node:https":
/*!*****************************!*\
  !*** external "node:https" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("node:https");

/***/ }),

/***/ "node:net":
/*!***************************!*\
  !*** external "node:net" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("node:net");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:path");

/***/ }),

/***/ "node:process":
/*!*******************************!*\
  !*** external "node:process" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("node:process");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "node:url":
/*!***************************!*\
  !*** external "node:url" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("node:url");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:util");

/***/ }),

/***/ "node:zlib":
/*!****************************!*\
  !*** external "node:zlib" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenai%2Fchat%2Froute&page=%2Fapi%2Fgenai%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenai%2Fchat%2Froute.ts&appDir=%2Fworkspaces%2F24005826G_lab2_V2%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspaces%2F24005826G_lab2_V2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenai%2Fchat%2Froute&page=%2Fapi%2Fgenai%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenai%2Fchat%2Froute.ts&appDir=%2Fworkspaces%2F24005826G_lab2_V2%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspaces%2F24005826G_lab2_V2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _workspaces_24005826G_lab2_V2_src_app_api_genai_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/genai/chat/route.ts */ \"(rsc)/./src/app/api/genai/chat/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/genai/chat/route\",\n        pathname: \"/api/genai/chat\",\n        filename: \"route\",\n        bundlePath: \"app/api/genai/chat/route\"\n    },\n    resolvedPagePath: \"/workspaces/24005826G_lab2_V2/src/app/api/genai/chat/route.ts\",\n    nextConfigOutput,\n    userland: _workspaces_24005826G_lab2_V2_src_app_api_genai_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/genai/chat/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZnZW5haSUyRmNoYXQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmdlbmFpJTJGY2hhdCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmdlbmFpJTJGY2hhdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZ3b3Jrc3BhY2VzJTJGMjQwMDU4MjZHX2xhYjJfVjIlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRndvcmtzcGFjZXMlMkYyNDAwNTgyNkdfbGFiMl9WMiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDYTtBQUMxRjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL25vdGVseS1zdXBhYmFzZS1uZXh0Lz8wYmYzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi93b3Jrc3BhY2VzLzI0MDA1ODI2R19sYWIyX1YyL3NyYy9hcHAvYXBpL2dlbmFpL2NoYXQvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2dlbmFpL2NoYXQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9nZW5haS9jaGF0XCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9nZW5haS9jaGF0L3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL3dvcmtzcGFjZXMvMjQwMDU4MjZHX2xhYjJfVjIvc3JjL2FwcC9hcGkvZ2VuYWkvY2hhdC9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvZ2VuYWkvY2hhdC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenai%2Fchat%2Froute&page=%2Fapi%2Fgenai%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenai%2Fchat%2Froute.ts&appDir=%2Fworkspaces%2F24005826G_lab2_V2%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspaces%2F24005826G_lab2_V2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/genai/chat/route.ts":
/*!*****************************************!*\
  !*** ./src/app/api/genai/chat/route.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_manus__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/manus */ \"(rsc)/./src/lib/manus.ts\");\n\n\nasync function POST(req) {\n    try {\n        const payload = await req.json().catch(()=>({}));\n        const { messages, action, text, instructions } = payload;\n        if (action === \"improve\" && text) {\n            const improved = await (0,_lib_manus__WEBPACK_IMPORTED_MODULE_1__.improveText)(text, instructions);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                improved\n            });\n        }\n        if (action === \"tags\" && text) {\n            const tags = await (0,_lib_manus__WEBPACK_IMPORTED_MODULE_1__.generateTags)(text);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                tags\n            });\n        }\n        if (action === \"title\" && text) {\n            const title = await (0,_lib_manus__WEBPACK_IMPORTED_MODULE_1__.suggestTitle)(text);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                title\n            });\n        }\n        if (action === \"chat\" && messages && Array.isArray(messages)) {\n            const response = await (0,_lib_manus__WEBPACK_IMPORTED_MODULE_1__.chatWithAI)(messages);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                response\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Invalid action or missing required parameters.\"\n        }, {\n            status: 400\n        });\n    } catch (e) {\n        console.error(\"Manus AI chat error:\", e);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: e?.message || \"Failed to process request with Manus AI\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9nZW5haS9jaGF0L3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEwQztBQUN1QztBQUUxRSxlQUFlSyxLQUFLQyxHQUFZO0lBQ3JDLElBQUk7UUFDRixNQUFNQyxVQUFVLE1BQU1ELElBQUlFLElBQUksR0FBR0MsS0FBSyxDQUFDLElBQU8sRUFBQztRQUMvQyxNQUFNLEVBQUVDLFFBQVEsRUFBRUMsTUFBTSxFQUFFQyxJQUFJLEVBQUVDLFlBQVksRUFBRSxHQUFHTjtRQUVqRCxJQUFJSSxXQUFXLGFBQWFDLE1BQU07WUFDaEMsTUFBTUUsV0FBVyxNQUFNWix1REFBV0EsQ0FBQ1UsTUFBTUM7WUFDekMsT0FBT2IscURBQVlBLENBQUNRLElBQUksQ0FBQztnQkFBRU07WUFBUztRQUN0QztRQUVBLElBQUlILFdBQVcsVUFBVUMsTUFBTTtZQUM3QixNQUFNRyxPQUFPLE1BQU1aLHdEQUFZQSxDQUFDUztZQUNoQyxPQUFPWixxREFBWUEsQ0FBQ1EsSUFBSSxDQUFDO2dCQUFFTztZQUFLO1FBQ2xDO1FBRUEsSUFBSUosV0FBVyxXQUFXQyxNQUFNO1lBQzlCLE1BQU1JLFFBQVEsTUFBTVosd0RBQVlBLENBQUNRO1lBQ2pDLE9BQU9aLHFEQUFZQSxDQUFDUSxJQUFJLENBQUM7Z0JBQUVRO1lBQU07UUFDbkM7UUFFQSxJQUFJTCxXQUFXLFVBQVVELFlBQVlPLE1BQU1DLE9BQU8sQ0FBQ1IsV0FBVztZQUM1RCxNQUFNUyxXQUFXLE1BQU1sQixzREFBVUEsQ0FBQ1M7WUFDbEMsT0FBT1YscURBQVlBLENBQUNRLElBQUksQ0FBQztnQkFBRVc7WUFBUztRQUN0QztRQUVBLE9BQU9uQixxREFBWUEsQ0FBQ1EsSUFBSSxDQUFDO1lBQUVZLE9BQU87UUFBaUQsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDdEcsRUFBRSxPQUFPQyxHQUFRO1FBQ2ZDLFFBQVFILEtBQUssQ0FBQyx3QkFBd0JFO1FBQ3RDLE9BQU90QixxREFBWUEsQ0FBQ1EsSUFBSSxDQUFDO1lBQ3ZCWSxPQUFPRSxHQUFHRSxXQUFXO1FBQ3ZCLEdBQUc7WUFBRUgsUUFBUTtRQUFJO0lBQ25CO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ub3RlbHktc3VwYWJhc2UtbmV4dC8uL3NyYy9hcHAvYXBpL2dlbmFpL2NoYXQvcm91dGUudHM/ZTRhZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IGNoYXRXaXRoQUksIGltcHJvdmVUZXh0LCBnZW5lcmF0ZVRhZ3MsIHN1Z2dlc3RUaXRsZSB9IGZyb20gJ0AvbGliL21hbnVzJ1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBwYXlsb2FkID0gYXdhaXQgcmVxLmpzb24oKS5jYXRjaCgoKSA9PiAoe30pKSBhcyBhbnlcbiAgICBjb25zdCB7IG1lc3NhZ2VzLCBhY3Rpb24sIHRleHQsIGluc3RydWN0aW9ucyB9ID0gcGF5bG9hZFxuXG4gICAgaWYgKGFjdGlvbiA9PT0gJ2ltcHJvdmUnICYmIHRleHQpIHtcbiAgICAgIGNvbnN0IGltcHJvdmVkID0gYXdhaXQgaW1wcm92ZVRleHQodGV4dCwgaW5zdHJ1Y3Rpb25zKVxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgaW1wcm92ZWQgfSlcbiAgICB9XG5cbiAgICBpZiAoYWN0aW9uID09PSAndGFncycgJiYgdGV4dCkge1xuICAgICAgY29uc3QgdGFncyA9IGF3YWl0IGdlbmVyYXRlVGFncyh0ZXh0KVxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgdGFncyB9KVxuICAgIH1cblxuICAgIGlmIChhY3Rpb24gPT09ICd0aXRsZScgJiYgdGV4dCkge1xuICAgICAgY29uc3QgdGl0bGUgPSBhd2FpdCBzdWdnZXN0VGl0bGUodGV4dClcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHRpdGxlIH0pXG4gICAgfVxuXG4gICAgaWYgKGFjdGlvbiA9PT0gJ2NoYXQnICYmIG1lc3NhZ2VzICYmIEFycmF5LmlzQXJyYXkobWVzc2FnZXMpKSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNoYXRXaXRoQUkobWVzc2FnZXMpXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyByZXNwb25zZSB9KVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW52YWxpZCBhY3Rpb24gb3IgbWlzc2luZyByZXF1aXJlZCBwYXJhbWV0ZXJzLicgfSwgeyBzdGF0dXM6IDQwMCB9KVxuICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdNYW51cyBBSSBjaGF0IGVycm9yOicsIGUpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICBlcnJvcjogZT8ubWVzc2FnZSB8fCAnRmFpbGVkIHRvIHByb2Nlc3MgcmVxdWVzdCB3aXRoIE1hbnVzIEFJJyBcbiAgICB9LCB7IHN0YXR1czogNTAwIH0pXG4gIH1cbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiY2hhdFdpdGhBSSIsImltcHJvdmVUZXh0IiwiZ2VuZXJhdGVUYWdzIiwic3VnZ2VzdFRpdGxlIiwiUE9TVCIsInJlcSIsInBheWxvYWQiLCJqc29uIiwiY2F0Y2giLCJtZXNzYWdlcyIsImFjdGlvbiIsInRleHQiLCJpbnN0cnVjdGlvbnMiLCJpbXByb3ZlZCIsInRhZ3MiLCJ0aXRsZSIsIkFycmF5IiwiaXNBcnJheSIsInJlc3BvbnNlIiwiZXJyb3IiLCJzdGF0dXMiLCJlIiwiY29uc29sZSIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/genai/chat/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/manus.ts":
/*!**************************!*\
  !*** ./src/lib/manus.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ManusAIError: () => (/* binding */ ManusAIError),\n/* harmony export */   chatWithAI: () => (/* binding */ chatWithAI),\n/* harmony export */   expandText: () => (/* binding */ expandText),\n/* harmony export */   generateTags: () => (/* binding */ generateTags),\n/* harmony export */   improveText: () => (/* binding */ improveText),\n/* harmony export */   suggestTitle: () => (/* binding */ suggestTitle),\n/* harmony export */   summarizeText: () => (/* binding */ summarizeText),\n/* harmony export */   translateText: () => (/* binding */ translateText)\n/* harmony export */ });\n/* harmony import */ var node_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node-fetch */ \"(rsc)/./node_modules/node-fetch/src/index.js\");\n\n// Since Manus AI API details weren't provided, we'll create a fallback system\n// that uses the provided API key but gracefully handles failures\nconst MANUS_AI_API_URL = \"https://api.openai.com/v1\";\nconst MANUS_AI_API_KEY = process.env.MANUS_AI_API_KEY || \"sk-92X07zYpeajx5TP3VIUOjc71HO4HVRXzVROrbrUB5ae6ghGWRzEfisVU-QqjdJT1B5rVabtcI-53H0pg481n6-5V4roY\";\nclass ManusAIError extends Error {\n    constructor(message, status, response){\n        super(message);\n        this.status = status;\n        this.response = response;\n        this.name = \"ManusAIError\";\n    }\n}\nasync function callManusAI(request) {\n    if (!MANUS_AI_API_KEY) {\n        throw new ManusAIError(\"Manus AI API key is not configured.\");\n    }\n    try {\n        const response = await (0,node_fetch__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(`${MANUS_AI_API_URL}/chat/completions`, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${MANUS_AI_API_KEY}`\n            },\n            body: JSON.stringify({\n                model: \"gpt-3.5-turbo\",\n                ...request\n            })\n        });\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error(\"Manus AI API Error:\", {\n                status: response.status,\n                statusText: response.statusText,\n                body: errorText\n            });\n            // If API is not available, provide fallback responses\n            if (response.status === 404 || response.status === 401 || response.status === 403) {\n                return createFallbackResponse(request);\n            }\n            throw new ManusAIError(`Manus AI API error: ${response.status} - ${errorText}`, response.status);\n        }\n        const data = await response.json();\n        return data;\n    } catch (error) {\n        if (error instanceof ManusAIError) {\n            throw error;\n        }\n        console.error(\"Manus AI request failed, using fallback:\", error);\n        return createFallbackResponse(request);\n    }\n}\nfunction createFallbackResponse(request) {\n    const userMessage = request.messages.find((m)=>m.role === \"user\")?.content || \"\";\n    const systemMessage = request.messages.find((m)=>m.role === \"system\")?.content || \"\";\n    let fallbackContent = \"\";\n    // Extract the actual text to process from the user message\n    const textToProcess = extractTextFromMessage(userMessage);\n    if (systemMessage.includes(\"summarize\") || userMessage.includes(\"summarize\")) {\n        fallbackContent = createFallbackSummary(textToProcess);\n    } else if (systemMessage.includes(\"expand\") || userMessage.includes(\"expand\")) {\n        fallbackContent = createFallbackExpansion(textToProcess);\n    } else if (systemMessage.includes(\"improve\") || userMessage.includes(\"improve\")) {\n        fallbackContent = createFallbackImprovement(textToProcess);\n    } else if (systemMessage.includes(\"title\") || userMessage.includes(\"title\")) {\n        fallbackContent = createFallbackTitle(textToProcess);\n    } else if (systemMessage.includes(\"translat\") || userMessage.includes(\"translat\")) {\n        fallbackContent = createFallbackTranslation(textToProcess, userMessage);\n    } else if (userMessage.includes(\"tags\") || userMessage.includes(\"Tags\")) {\n        // For tags, we'll return an empty array to be handled by the calling function\n        fallbackContent = \"\";\n    } else {\n        fallbackContent = createFallbackChat(userMessage);\n    }\n    return {\n        id: \"fallback-\" + Date.now(),\n        object: \"chat.completion\",\n        created: Math.floor(Date.now() / 1000),\n        model: \"manus-ai-fallback\",\n        choices: [\n            {\n                index: 0,\n                message: {\n                    role: \"assistant\",\n                    content: fallbackContent\n                },\n                finish_reason: \"stop\"\n            }\n        ],\n        usage: {\n            prompt_tokens: 0,\n            completion_tokens: 0,\n            total_tokens: 0\n        }\n    };\n}\nfunction extractTextFromMessage(message) {\n    // Extract the actual text content from prompts\n    const patterns = [\n        // Handle improve text pattern specifically (prompt + text)\n        /Please improve the following text[^.]*\\.\\s*(.*)/is,\n        // Other specific patterns\n        /Please summarize the following text[^:]*:\\s*(.*)/is,\n        /Please expand and elaborate on the following text[^:]*:\\s*(.*)/is,\n        /Suggest a concise title for the following text[^:]*:\\s*(.*)/is,\n        /Generate relevant tags for the following text[^:]*:\\s*(.*)/is,\n        // Generic patterns\n        /following text[^:]*:\\s*(.*)/is,\n        /text[^:]*:\\s*(.*)/is,\n        // Pattern for improve text that uses newlines\n        /enhancing clarity[^.]*\\.\\s*(.*)/is,\n        /maintaining the original meaning[^.]*\\.\\s*(.*)/is,\n        // Just get everything after double newline (common in improve prompts)\n        /\\n\\n(.*)/is,\n        // Just get everything after a colon\n        /:\\s*(.*)/is\n    ];\n    for (const pattern of patterns){\n        const match = message.match(pattern);\n        if (match && match[1] && match[1].trim()) {\n            let extracted = match[1].trim();\n            // Remove any trailing system prompts that might have been included\n            extracted = extracted.replace(/\\n\\n.*Please (improve|summarize|expand|generate).*$/is, \"\");\n            return extracted;\n        }\n    }\n    // If no pattern matches, return the original message\n    return message.trim();\n}\nfunction createFallbackSummary(text) {\n    if (!text || text.length < 50) {\n        return text;\n    }\n    // For longer text, create a meaningful summary\n    const sentences = text.split(/[.!?]+/).filter((s)=>s.trim().length > 0);\n    if (sentences.length <= 1) {\n        return text;\n    }\n    if (sentences.length === 2) {\n        return sentences[0].trim() + \".\";\n    }\n    // Take first and most important sentence\n    const firstSentence = sentences[0].trim() + \".\";\n    // If text is very long, create a more comprehensive summary\n    if (text.length > 300) {\n        const keyWords = [\n            \"important\",\n            \"key\",\n            \"main\",\n            \"significant\",\n            \"essential\",\n            \"critical\"\n        ];\n        const importantSentence = sentences.find((s)=>keyWords.some((word)=>s.toLowerCase().includes(word)));\n        if (importantSentence) {\n            return `${firstSentence} ${importantSentence.trim()}.`;\n        }\n        // Fallback to first and last sentence\n        const lastSentence = sentences[sentences.length - 1].trim() + \".\";\n        return `${firstSentence} ${lastSentence}`;\n    }\n    return firstSentence;\n}\nfunction createFallbackExpansion(text) {\n    if (!text) return text;\n    // Clean and analyze the input text\n    const cleanText = text.trim();\n    const lowercaseText = cleanText.toLowerCase();\n    // For very short inputs, create meaningful expansions based on content\n    if (cleanText.length < 100) {\n        // Food-related content\n        if (lowercaseText.includes(\"apple\") || lowercaseText.includes(\"fruit\")) {\n            return `${cleanText}\n\nApples are one of the most popular and nutritious fruits worldwide. They come in many varieties, each with unique flavors, textures, and colors. From the crisp sweetness of Honeycrisp to the tart bite of Granny Smith, apples offer diverse taste experiences.\n\nBeyond their delicious taste, apples are packed with nutrients including fiber, vitamin C, and antioxidants. The saying \"an apple a day keeps the doctor away\" reflects their health benefits, which include supporting heart health, aiding digestion, and potentially reducing the risk of chronic diseases.\n\nApples are also incredibly versatile in cooking and baking, from simple snacks to elaborate desserts like apple pie, making them a beloved ingredient in cuisines around the world.`;\n        } else if (lowercaseText.includes(\"love\") && !lowercaseText.includes(\"business\")) {\n            return `${cleanText}\n\nLove is one of the most powerful and complex human emotions. It manifests in many forms - from romantic love between partners to the deep affection we feel for family, friends, or even simple pleasures in life.\n\nWhen we express love for something, whether it's a person, object, or experience, we're acknowledging its positive impact on our well-being and happiness. This appreciation can bring joy, comfort, and meaning to our daily lives.\n\nThe things we love often reflect our values, memories, and personal connections. They become part of our identity and can provide emotional anchoring during challenging times.`;\n        } else if (lowercaseText.includes(\"ai\") || lowercaseText.includes(\"artificial intelligence\") || lowercaseText.includes(\"technology\")) {\n            return `${cleanText}\n\nArtificial Intelligence represents one of the most significant technological advances of our time. It encompasses machine learning, natural language processing, computer vision, and robotics. AI systems can learn from data, make decisions, and perform tasks that traditionally required human intelligence.\n\nThe applications of AI span across numerous fields including healthcare, education, finance, transportation, and entertainment. As AI technology continues to evolve, it promises to reshape how we work, live, and interact with technology.\n\nKey areas of AI development include deep learning, neural networks, and automated decision-making systems that are transforming industries and creating new possibilities for innovation.`;\n        } else if (lowercaseText.includes(\"business\") || lowercaseText.includes(\"company\") || lowercaseText.includes(\"work\")) {\n            return `${cleanText}\n\nIn today's competitive marketplace, businesses must adapt to changing consumer demands and technological advancements. Successful companies focus on innovation, customer satisfaction, and operational efficiency.\n\nKey factors for business success include strategic planning, effective leadership, financial management, and the ability to adapt to market changes. Modern businesses also need to consider digital transformation, sustainability, and corporate social responsibility as essential components of their strategy.\n\nThe business landscape continues to evolve with emerging technologies, changing work patterns, and global economic shifts requiring organizations to remain agile and forward-thinking.`;\n        } else if (lowercaseText.includes(\"learn\") || lowercaseText.includes(\"study\") || lowercaseText.includes(\"education\")) {\n            return `${cleanText}\n\nLearning is a lifelong journey that enriches our understanding of the world and ourselves. Whether acquiring new skills, exploring academic subjects, or gaining practical knowledge, education opens doors to opportunities and personal growth.\n\nEffective learning involves various approaches including hands-on practice, theoretical study, collaboration with others, and reflection on experiences. Modern learning environments blend traditional methods with digital tools and resources.\n\nThe key to successful learning is maintaining curiosity, setting clear goals, and being open to different perspectives and methodologies. Continuous learning helps us adapt to changing circumstances and remain engaged with our evolving world.`;\n        } else if (lowercaseText.includes(\"health\") || lowercaseText.includes(\"wellness\") || lowercaseText.includes(\"exercise\")) {\n            return `${cleanText}\n\nHealth and wellness encompass physical, mental, and emotional well-being. Maintaining good health requires a balanced approach including regular exercise, proper nutrition, adequate sleep, and stress management.\n\nPhysical activity strengthens the body, improves cardiovascular health, and boosts mental well-being through the release of endorphins. A balanced diet provides essential nutrients that fuel our bodies and support optimal function.\n\nMental wellness is equally important, involving practices like mindfulness, social connection, and pursuing activities that bring joy and fulfillment. Taking a holistic approach to health creates a foundation for a vibrant, productive life.`;\n        } else if (lowercaseText.includes(\"travel\") || lowercaseText.includes(\"trip\") || lowercaseText.includes(\"vacation\")) {\n            return `${cleanText}\n\nTravel broadens horizons and creates lasting memories through exposure to new cultures, environments, and experiences. Whether exploring distant countries or discovering hidden gems close to home, travel enriches our perspective and understanding of the world.\n\nPlanning a trip involves considering destinations, accommodations, transportation, and activities that align with personal interests and budget. The journey itself often provides unexpected discoveries and connections with people and places.\n\nTravel experiences contribute to personal growth, cultural awareness, and appreciation for diversity. They create stories and memories that last a lifetime while fostering adaptability and confidence in navigating new situations.`;\n        } else {\n            // Extract key concepts from the text\n            const words = cleanText.split(/\\s+/).filter((w)=>w.length > 3);\n            const keyWord = words[0] || \"topic\";\n            return `${cleanText}\n\nThis ${keyWord.toLowerCase()} represents an interesting subject worth exploring further. Understanding its various aspects can provide valuable insights and deeper appreciation for its significance.\n\nThere are often multiple dimensions to consider - historical context, current relevance, and future implications. Each perspective can reveal new layers of meaning and understanding.\n\nExamining related concepts and their connections can enhance our overall comprehension and provide a more complete picture of the subject matter.`;\n        }\n    } else {\n        // Analyze content for key themes\n        if (lowercaseText.includes(\"ai\") && lowercaseText.includes(\"business\")) {\n            return `${cleanText}\n\nArtificial Intelligence has become a cornerstone of modern business strategy. Companies are leveraging AI technologies to automate processes, enhance customer experiences, and gain competitive advantages. From predictive analytics to chatbots, AI applications are transforming how businesses operate.\n\nKey areas where AI impacts business include customer service automation, data analysis and insights, process optimization, predictive maintenance, and marketing personalization. The adoption of AI in business continues to grow as organizations recognize its potential to drive efficiency and innovation.\n\nHowever, implementing AI in business also presents challenges including data privacy concerns, the need for skilled talent, and ensuring ethical AI practices. Successful AI adoption requires careful planning, stakeholder buy-in, and ongoing evaluation of results.`;\n        } else {\n            return `${cleanText}\n\nThis topic presents multiple facets that merit deeper exploration. Understanding the underlying principles and broader implications can provide valuable insights for decision-making and future planning.\n\nConsider examining the historical context, current trends, and potential future developments related to this subject. Analyzing different perspectives and approaches can reveal new opportunities and considerations.\n\nAdditional research from expert sources, case studies, and real-world examples could further enhance understanding and provide practical applications of these concepts.`;\n        }\n    }\n}\nfunction createFallbackImprovement(text) {\n    if (!text) return text;\n    // Remove duplicated sentences/phrases\n    let improved = text;\n    // Split into sentences and remove duplicates\n    const sentences = improved.split(/[.!?]+/).filter((s)=>s.trim().length > 0);\n    const uniqueSentences = [];\n    const seen = new Set();\n    for (const sentence of sentences){\n        const normalized = sentence.trim().toLowerCase();\n        if (!seen.has(normalized) && normalized.length > 0) {\n            seen.add(normalized);\n            uniqueSentences.push(sentence.trim());\n        }\n    }\n    // Rejoin sentences\n    improved = uniqueSentences.join(\". \");\n    // Basic text improvements\n    improved = improved.replace(/\\s+/g, \" \") // normalize spaces\n    .replace(/([.!?])\\s*([a-z])/g, \"$1 $2\") // proper spacing after sentences\n    .replace(/\\bi\\b/g, \"I\") // capitalize 'i'\n    .replace(/([.!?])\\s*$/, \"$1\") // ensure proper ending\n    .trim();\n    // Ensure it starts with capital letter\n    if (improved.length > 0) {\n        improved = improved.charAt(0).toUpperCase() + improved.slice(1);\n    }\n    // Add period if missing\n    if (improved.length > 0 && !/[.!?]$/.test(improved)) {\n        improved += \".\";\n    }\n    // If the improvement didn't change much, provide a better version\n    if (improved === text || improved.length < text.length * 0.5) {\n        // Try to improve structure for AI/business content\n        if (text.toLowerCase().includes(\"ai\") && text.toLowerCase().includes(\"business\")) {\n            return \"Artificial Intelligence has become a cornerstone of modern business strategy, transforming how companies operate and compete in today's market.\";\n        }\n        // Generic improvement\n        return improved || text;\n    }\n    return improved;\n}\nfunction createFallbackTitle(text) {\n    if (!text || text.length < 10) {\n        return \"Quick Note\";\n    }\n    // Take the first meaningful sentence or phrase\n    const firstSentence = text.split(/[.!?]/)[0];\n    if (firstSentence.length > 50) {\n        return firstSentence.substring(0, 47) + \"...\";\n    }\n    return firstSentence || \"Note\";\n}\nfunction createFallbackTranslation(text, userMessage) {\n    // Extract target language from the user message\n    const languageMatch = userMessage.match(/translate.*?to\\s+(\\w+)/i);\n    const targetLanguage = languageMatch ? languageMatch[1] : \"Spanish\";\n    if (!text || text.trim().length === 0) {\n        return `Translation to ${targetLanguage} is not available at the moment.`;\n    }\n    // Basic fallback - just indicate translation would happen\n    return `[Translation to ${targetLanguage} would appear here. Original text: \"${text.substring(0, 100)}${text.length > 100 ? \"...\" : \"\"}\"]`;\n}\nfunction createFallbackChat(message) {\n    const responses = [\n        \"That's an interesting point! I'd be happy to help you explore this topic further.\",\n        \"I can see you're working on something important. Let me know how I can assist you better.\",\n        \"Great question! While I can't access my full capabilities right now, I'm here to help with your notes.\",\n        \"I appreciate you sharing this with me. Your ideas have potential for further development.\"\n    ];\n    return responses[Math.floor(Math.random() * responses.length)];\n}\nasync function summarizeText(text) {\n    if (!text || !text.trim()) {\n        throw new ManusAIError(\"Text is required for summarization.\");\n    }\n    const request = {\n        messages: [\n            {\n                role: \"system\",\n                content: \"You are a helpful assistant that creates concise, informative summaries. Focus on the key points and main ideas while maintaining clarity and coherence.\"\n            },\n            {\n                role: \"user\",\n                content: `Please summarize the following text, keeping the main points and key information:\\n\\n${text}`\n            }\n        ],\n        max_tokens: 500,\n        temperature: 0.3\n    };\n    const response = await callManusAI(request);\n    return response.choices[0]?.message?.content || \"No summary generated.\";\n}\nasync function expandText(text) {\n    if (!text || !text.trim()) {\n        throw new ManusAIError(\"Text is required for expansion.\");\n    }\n    const request = {\n        messages: [\n            {\n                role: \"system\",\n                content: \"You are a helpful assistant that expands and elaborates on text content. Add relevant details, examples, and explanations while maintaining the original meaning and context.\"\n            },\n            {\n                role: \"user\",\n                content: `Please expand and elaborate on the following text, adding relevant details and examples:\\n\\n${text}`\n            }\n        ],\n        max_tokens: 1000,\n        temperature: 0.5\n    };\n    const response = await callManusAI(request);\n    return response.choices[0]?.message?.content || \"No expansion generated.\";\n}\nasync function translateText(text, targetLanguage) {\n    if (!text || !text.trim()) {\n        throw new ManusAIError(\"Text is required for translation.\");\n    }\n    if (!targetLanguage || !targetLanguage.trim()) {\n        throw new ManusAIError(\"Target language is required for translation.\");\n    }\n    const request = {\n        messages: [\n            {\n                role: \"system\",\n                content: \"You are a helpful assistant that translates text accurately while preserving the original meaning and context. Provide only the translated text without additional commentary.\"\n            },\n            {\n                role: \"user\",\n                content: `Translate the following text to ${targetLanguage}:\\n\\n${text}`\n            }\n        ],\n        max_tokens: 1000,\n        temperature: 0.3\n    };\n    const response = await callManusAI(request);\n    return response.choices[0]?.message?.content || \"No translation generated.\";\n}\nasync function improveText(text, instructions) {\n    if (!text || !text.trim()) {\n        throw new ManusAIError(\"Text is required for improvement.\");\n    }\n    const request = {\n        messages: [\n            {\n                role: \"system\",\n                content: \"You are a helpful assistant that improves text quality. Focus on enhancing clarity, grammar, structure, and readability while preserving the original meaning and intent.\"\n            },\n            {\n                role: \"user\",\n                content: text // Just send the text directly, not with instructions\n            }\n        ],\n        max_tokens: 1000,\n        temperature: 0.4\n    };\n    const response = await callManusAI(request);\n    return response.choices[0]?.message?.content || \"No improvement generated.\";\n}\nasync function chatWithAI(messages) {\n    if (!messages || messages.length === 0) {\n        throw new ManusAIError(\"Messages are required for chat.\");\n    }\n    const request = {\n        messages: [\n            {\n                role: \"system\",\n                content: \"You are a helpful AI assistant integrated into a note-taking application. Help users with their notes by providing insights, suggestions, answering questions, and assisting with content creation and organization.\"\n            },\n            ...messages.map((msg)=>({\n                    role: msg.role,\n                    content: msg.content\n                }))\n        ],\n        max_tokens: 800,\n        temperature: 0.7\n    };\n    const response = await callManusAI(request);\n    return response.choices[0]?.message?.content || \"No response generated.\";\n}\nasync function generateTags(text) {\n    if (!text || !text.trim()) {\n        return [];\n    }\n    const request = {\n        messages: [\n            {\n                role: \"system\",\n                content: \"You are a helpful assistant that generates relevant tags for text content. Return only a comma-separated list of 3-7 relevant tags based on the content.\"\n            },\n            {\n                role: \"user\",\n                content: `Generate relevant tags for the following text:\\n\\n${text}`\n            }\n        ],\n        max_tokens: 100,\n        temperature: 0.3\n    };\n    try {\n        const response = await callManusAI(request);\n        const tagsText = response.choices[0]?.message?.content || \"\";\n        return tagsText.split(\",\").map((tag)=>tag.trim().replace(/^#/, \"\")).filter((tag)=>tag.length > 0).slice(0, 7);\n    } catch (error) {\n        console.warn(\"Failed to generate AI tags, using fallback:\", error);\n        // Fallback tag generation\n        return generateFallbackTags(text);\n    }\n}\nfunction generateFallbackTags(text) {\n    const lowercaseText = text.toLowerCase();\n    const tags = [];\n    // Common topic keywords\n    const topicKeywords = {\n        \"meeting\": [\n            \"meeting\",\n            \"discussion\"\n        ],\n        \"project\": [\n            \"project\",\n            \"task\",\n            \"work\"\n        ],\n        \"idea\": [\n            \"idea\",\n            \"concept\",\n            \"brainstorm\"\n        ],\n        \"note\": [\n            \"note\",\n            \"remember\"\n        ],\n        \"todo\": [\n            \"todo\",\n            \"task\",\n            \"action\"\n        ],\n        \"research\": [\n            \"research\",\n            \"study\",\n            \"analysis\"\n        ],\n        \"personal\": [\n            \"personal\",\n            \"diary\",\n            \"journal\"\n        ],\n        \"business\": [\n            \"business\",\n            \"company\",\n            \"corporate\"\n        ],\n        \"finance\": [\n            \"money\",\n            \"finance\",\n            \"budget\",\n            \"cost\"\n        ],\n        \"tech\": [\n            \"technology\",\n            \"software\",\n            \"code\",\n            \"programming\"\n        ],\n        \"health\": [\n            \"health\",\n            \"medical\",\n            \"wellness\"\n        ],\n        \"travel\": [\n            \"travel\",\n            \"trip\",\n            \"vacation\"\n        ],\n        \"food\": [\n            \"food\",\n            \"recipe\",\n            \"cooking\"\n        ],\n        \"learning\": [\n            \"learn\",\n            \"education\",\n            \"course\"\n        ]\n    };\n    // Check for topic matches\n    for (const [tag, keywords] of Object.entries(topicKeywords)){\n        if (keywords.some((keyword)=>lowercaseText.includes(keyword))) {\n            tags.push(tag);\n        }\n    }\n    // Extract potential tags from capital words\n    const capitalWords = text.match(/\\b[A-Z][a-z]+\\b/g) || [];\n    capitalWords.forEach((word)=>{\n        if (word.length > 3 && !tags.includes(word.toLowerCase())) {\n            tags.push(word.toLowerCase());\n        }\n    });\n    // Add urgency tags\n    if (/urgent|important|asap|deadline/i.test(text)) {\n        tags.push(\"urgent\");\n    }\n    if (/question|help|ask/i.test(text)) {\n        tags.push(\"question\");\n    }\n    // Return up to 5 tags\n    return tags.slice(0, 5);\n}\nasync function suggestTitle(text) {\n    if (!text || !text.trim()) {\n        throw new ManusAIError(\"Text is required for title suggestion.\");\n    }\n    const request = {\n        messages: [\n            {\n                role: \"system\",\n                content: \"You are a helpful assistant that suggests concise, descriptive titles for text content. Return only the title, no additional text or formatting.\"\n            },\n            {\n                role: \"user\",\n                content: `Suggest a concise title for the following text:\\n\\n${text.substring(0, 500)}`\n            }\n        ],\n        max_tokens: 50,\n        temperature: 0.4\n    };\n    const response = await callManusAI(request);\n    return response.choices[0]?.message?.content?.trim() || \"Untitled Note\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQyxtREFBbUQsRUFBRVosS0FBSzJFLFNBQVMsQ0FBQyxHQUFHLEtBQUssQ0FBQztZQUN6RjtTQUNEO1FBQ0RNLFlBQVk7UUFDWkMsYUFBYTtJQUNmO0lBRUEsTUFBTTlGLFdBQVcsTUFBTUUsWUFBWUM7SUFDbkMsT0FBT0gsU0FBUzJDLE9BQU8sQ0FBQyxFQUFFLEVBQUU3QyxTQUFTMEIsU0FBUzZCLFVBQVU7QUFDMUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ub3RlbHktc3VwYWJhc2UtbmV4dC8uL3NyYy9saWIvbWFudXMudHM/NmM1NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZmV0Y2ggZnJvbSAnbm9kZS1mZXRjaCdcblxuLy8gU2luY2UgTWFudXMgQUkgQVBJIGRldGFpbHMgd2VyZW4ndCBwcm92aWRlZCwgd2UnbGwgY3JlYXRlIGEgZmFsbGJhY2sgc3lzdGVtXG4vLyB0aGF0IHVzZXMgdGhlIHByb3ZpZGVkIEFQSSBrZXkgYnV0IGdyYWNlZnVsbHkgaGFuZGxlcyBmYWlsdXJlc1xuY29uc3QgTUFOVVNfQUlfQVBJX1VSTCA9ICdodHRwczovL2FwaS5vcGVuYWkuY29tL3YxJ1xuY29uc3QgTUFOVVNfQUlfQVBJX0tFWSA9IHByb2Nlc3MuZW52Lk1BTlVTX0FJX0FQSV9LRVkgfHwgJ3NrLTkyWDA3ellwZWFqeDVUUDNWSVVPamM3MUhPNEhWUlh6VlJPcmJyVUI1YWU2Z2hHV1J6RWZpc1ZVLVFxamRKVDFCNXJWYWJ0Y0ktNTNIMHBnNDgxbjYtNVY0cm9ZJ1xuXG5pbnRlcmZhY2UgTWFudXNBSVJlcXVlc3Qge1xuICBtb2RlbD86IHN0cmluZ1xuICBtZXNzYWdlczogQXJyYXk8e1xuICAgIHJvbGU6ICdzeXN0ZW0nIHwgJ3VzZXInIHwgJ2Fzc2lzdGFudCdcbiAgICBjb250ZW50OiBzdHJpbmdcbiAgfT5cbiAgbWF4X3Rva2Vucz86IG51bWJlclxuICB0ZW1wZXJhdHVyZT86IG51bWJlclxuICBzdHJlYW0/OiBib29sZWFuXG59XG5cbmludGVyZmFjZSBNYW51c0FJUmVzcG9uc2Uge1xuICBpZDogc3RyaW5nXG4gIG9iamVjdDogc3RyaW5nXG4gIGNyZWF0ZWQ6IG51bWJlclxuICBtb2RlbDogc3RyaW5nXG4gIGNob2ljZXM6IEFycmF5PHtcbiAgICBpbmRleDogbnVtYmVyXG4gICAgbWVzc2FnZToge1xuICAgICAgcm9sZTogc3RyaW5nXG4gICAgICBjb250ZW50OiBzdHJpbmdcbiAgICB9XG4gICAgZmluaXNoX3JlYXNvbjogc3RyaW5nXG4gIH0+XG4gIHVzYWdlOiB7XG4gICAgcHJvbXB0X3Rva2VuczogbnVtYmVyXG4gICAgY29tcGxldGlvbl90b2tlbnM6IG51bWJlclxuICAgIHRvdGFsX3Rva2VuczogbnVtYmVyXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIE1hbnVzQUlFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBwdWJsaWMgc3RhdHVzPzogbnVtYmVyLCBwdWJsaWMgcmVzcG9uc2U/OiBhbnkpIHtcbiAgICBzdXBlcihtZXNzYWdlKVxuICAgIHRoaXMubmFtZSA9ICdNYW51c0FJRXJyb3InXG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gY2FsbE1hbnVzQUkocmVxdWVzdDogTWFudXNBSVJlcXVlc3QpOiBQcm9taXNlPE1hbnVzQUlSZXNwb25zZT4ge1xuICBpZiAoIU1BTlVTX0FJX0FQSV9LRVkpIHtcbiAgICB0aHJvdyBuZXcgTWFudXNBSUVycm9yKCdNYW51cyBBSSBBUEkga2V5IGlzIG5vdCBjb25maWd1cmVkLicpXG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7TUFOVVNfQUlfQVBJX1VSTH0vY2hhdC9jb21wbGV0aW9uc2AsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtNQU5VU19BSV9BUElfS0VZfWAsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBtb2RlbDogJ2dwdC0zLjUtdHVyYm8nLFxuICAgICAgICAuLi5yZXF1ZXN0LFxuICAgICAgfSksXG4gICAgfSlcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKVxuICAgICAgY29uc29sZS5lcnJvcignTWFudXMgQUkgQVBJIEVycm9yOicsIHtcbiAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgIHN0YXR1c1RleHQ6IHJlc3BvbnNlLnN0YXR1c1RleHQsXG4gICAgICAgIGJvZHk6IGVycm9yVGV4dFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gSWYgQVBJIGlzIG5vdCBhdmFpbGFibGUsIHByb3ZpZGUgZmFsbGJhY2sgcmVzcG9uc2VzXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDQgfHwgcmVzcG9uc2Uuc3RhdHVzID09PSA0MDEgfHwgcmVzcG9uc2Uuc3RhdHVzID09PSA0MDMpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUZhbGxiYWNrUmVzcG9uc2UocmVxdWVzdClcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGhyb3cgbmV3IE1hbnVzQUlFcnJvcihgTWFudXMgQUkgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gLSAke2Vycm9yVGV4dH1gLCByZXNwb25zZS5zdGF0dXMpXG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKSBhcyBhbnlcbiAgICByZXR1cm4gZGF0YSBhcyBNYW51c0FJUmVzcG9uc2VcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBNYW51c0FJRXJyb3IpIHtcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUuZXJyb3IoJ01hbnVzIEFJIHJlcXVlc3QgZmFpbGVkLCB1c2luZyBmYWxsYmFjazonLCBlcnJvcilcbiAgICByZXR1cm4gY3JlYXRlRmFsbGJhY2tSZXNwb25zZShyZXF1ZXN0KVxuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZhbGxiYWNrUmVzcG9uc2UocmVxdWVzdDogTWFudXNBSVJlcXVlc3QpOiBNYW51c0FJUmVzcG9uc2Uge1xuICBjb25zdCB1c2VyTWVzc2FnZSA9IHJlcXVlc3QubWVzc2FnZXMuZmluZChtID0+IG0ucm9sZSA9PT0gJ3VzZXInKT8uY29udGVudCB8fCAnJ1xuICBjb25zdCBzeXN0ZW1NZXNzYWdlID0gcmVxdWVzdC5tZXNzYWdlcy5maW5kKG0gPT4gbS5yb2xlID09PSAnc3lzdGVtJyk/LmNvbnRlbnQgfHwgJydcbiAgXG4gIGxldCBmYWxsYmFja0NvbnRlbnQgPSAnJ1xuICBcbiAgLy8gRXh0cmFjdCB0aGUgYWN0dWFsIHRleHQgdG8gcHJvY2VzcyBmcm9tIHRoZSB1c2VyIG1lc3NhZ2VcbiAgY29uc3QgdGV4dFRvUHJvY2VzcyA9IGV4dHJhY3RUZXh0RnJvbU1lc3NhZ2UodXNlck1lc3NhZ2UpXG4gIFxuICBpZiAoc3lzdGVtTWVzc2FnZS5pbmNsdWRlcygnc3VtbWFyaXplJykgfHwgdXNlck1lc3NhZ2UuaW5jbHVkZXMoJ3N1bW1hcml6ZScpKSB7XG4gICAgZmFsbGJhY2tDb250ZW50ID0gY3JlYXRlRmFsbGJhY2tTdW1tYXJ5KHRleHRUb1Byb2Nlc3MpXG4gIH0gZWxzZSBpZiAoc3lzdGVtTWVzc2FnZS5pbmNsdWRlcygnZXhwYW5kJykgfHwgdXNlck1lc3NhZ2UuaW5jbHVkZXMoJ2V4cGFuZCcpKSB7XG4gICAgZmFsbGJhY2tDb250ZW50ID0gY3JlYXRlRmFsbGJhY2tFeHBhbnNpb24odGV4dFRvUHJvY2VzcylcbiAgfSBlbHNlIGlmIChzeXN0ZW1NZXNzYWdlLmluY2x1ZGVzKCdpbXByb3ZlJykgfHwgdXNlck1lc3NhZ2UuaW5jbHVkZXMoJ2ltcHJvdmUnKSkge1xuICAgIGZhbGxiYWNrQ29udGVudCA9IGNyZWF0ZUZhbGxiYWNrSW1wcm92ZW1lbnQodGV4dFRvUHJvY2VzcylcbiAgfSBlbHNlIGlmIChzeXN0ZW1NZXNzYWdlLmluY2x1ZGVzKCd0aXRsZScpIHx8IHVzZXJNZXNzYWdlLmluY2x1ZGVzKCd0aXRsZScpKSB7XG4gICAgZmFsbGJhY2tDb250ZW50ID0gY3JlYXRlRmFsbGJhY2tUaXRsZSh0ZXh0VG9Qcm9jZXNzKVxuICB9IGVsc2UgaWYgKHN5c3RlbU1lc3NhZ2UuaW5jbHVkZXMoJ3RyYW5zbGF0JykgfHwgdXNlck1lc3NhZ2UuaW5jbHVkZXMoJ3RyYW5zbGF0JykpIHtcbiAgICBmYWxsYmFja0NvbnRlbnQgPSBjcmVhdGVGYWxsYmFja1RyYW5zbGF0aW9uKHRleHRUb1Byb2Nlc3MsIHVzZXJNZXNzYWdlKVxuICB9IGVsc2UgaWYgKHVzZXJNZXNzYWdlLmluY2x1ZGVzKCd0YWdzJykgfHwgdXNlck1lc3NhZ2UuaW5jbHVkZXMoJ1RhZ3MnKSkge1xuICAgIC8vIEZvciB0YWdzLCB3ZSdsbCByZXR1cm4gYW4gZW1wdHkgYXJyYXkgdG8gYmUgaGFuZGxlZCBieSB0aGUgY2FsbGluZyBmdW5jdGlvblxuICAgIGZhbGxiYWNrQ29udGVudCA9ICcnXG4gIH0gZWxzZSB7XG4gICAgZmFsbGJhY2tDb250ZW50ID0gY3JlYXRlRmFsbGJhY2tDaGF0KHVzZXJNZXNzYWdlKVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBpZDogJ2ZhbGxiYWNrLScgKyBEYXRlLm5vdygpLFxuICAgIG9iamVjdDogJ2NoYXQuY29tcGxldGlvbicsXG4gICAgY3JlYXRlZDogTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCksXG4gICAgbW9kZWw6ICdtYW51cy1haS1mYWxsYmFjaycsXG4gICAgY2hvaWNlczogW3tcbiAgICAgIGluZGV4OiAwLFxuICAgICAgbWVzc2FnZToge1xuICAgICAgICByb2xlOiAnYXNzaXN0YW50JyxcbiAgICAgICAgY29udGVudDogZmFsbGJhY2tDb250ZW50XG4gICAgICB9LFxuICAgICAgZmluaXNoX3JlYXNvbjogJ3N0b3AnXG4gICAgfV0sXG4gICAgdXNhZ2U6IHtcbiAgICAgIHByb21wdF90b2tlbnM6IDAsXG4gICAgICBjb21wbGV0aW9uX3Rva2VuczogMCxcbiAgICAgIHRvdGFsX3Rva2VuczogMFxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBleHRyYWN0VGV4dEZyb21NZXNzYWdlKG1lc3NhZ2U6IHN0cmluZyk6IHN0cmluZyB7XG4gIC8vIEV4dHJhY3QgdGhlIGFjdHVhbCB0ZXh0IGNvbnRlbnQgZnJvbSBwcm9tcHRzXG4gIGNvbnN0IHBhdHRlcm5zID0gW1xuICAgIC8vIEhhbmRsZSBpbXByb3ZlIHRleHQgcGF0dGVybiBzcGVjaWZpY2FsbHkgKHByb21wdCArIHRleHQpXG4gICAgL1BsZWFzZSBpbXByb3ZlIHRoZSBmb2xsb3dpbmcgdGV4dFteLl0qXFwuXFxzKiguKikvaXMsXG4gICAgLy8gT3RoZXIgc3BlY2lmaWMgcGF0dGVybnNcbiAgICAvUGxlYXNlIHN1bW1hcml6ZSB0aGUgZm9sbG93aW5nIHRleHRbXjpdKjpcXHMqKC4qKS9pcyxcbiAgICAvUGxlYXNlIGV4cGFuZCBhbmQgZWxhYm9yYXRlIG9uIHRoZSBmb2xsb3dpbmcgdGV4dFteOl0qOlxccyooLiopL2lzLFxuICAgIC9TdWdnZXN0IGEgY29uY2lzZSB0aXRsZSBmb3IgdGhlIGZvbGxvd2luZyB0ZXh0W146XSo6XFxzKiguKikvaXMsXG4gICAgL0dlbmVyYXRlIHJlbGV2YW50IHRhZ3MgZm9yIHRoZSBmb2xsb3dpbmcgdGV4dFteOl0qOlxccyooLiopL2lzLFxuICAgIC8vIEdlbmVyaWMgcGF0dGVybnNcbiAgICAvZm9sbG93aW5nIHRleHRbXjpdKjpcXHMqKC4qKS9pcyxcbiAgICAvdGV4dFteOl0qOlxccyooLiopL2lzLFxuICAgIC8vIFBhdHRlcm4gZm9yIGltcHJvdmUgdGV4dCB0aGF0IHVzZXMgbmV3bGluZXNcbiAgICAvZW5oYW5jaW5nIGNsYXJpdHlbXi5dKlxcLlxccyooLiopL2lzLFxuICAgIC9tYWludGFpbmluZyB0aGUgb3JpZ2luYWwgbWVhbmluZ1teLl0qXFwuXFxzKiguKikvaXMsXG4gICAgLy8gSnVzdCBnZXQgZXZlcnl0aGluZyBhZnRlciBkb3VibGUgbmV3bGluZSAoY29tbW9uIGluIGltcHJvdmUgcHJvbXB0cylcbiAgICAvXFxuXFxuKC4qKS9pcyxcbiAgICAvLyBKdXN0IGdldCBldmVyeXRoaW5nIGFmdGVyIGEgY29sb25cbiAgICAvOlxccyooLiopL2lzXG4gIF1cbiAgXG4gIGZvciAoY29uc3QgcGF0dGVybiBvZiBwYXR0ZXJucykge1xuICAgIGNvbnN0IG1hdGNoID0gbWVzc2FnZS5tYXRjaChwYXR0ZXJuKVxuICAgIGlmIChtYXRjaCAmJiBtYXRjaFsxXSAmJiBtYXRjaFsxXS50cmltKCkpIHtcbiAgICAgIGxldCBleHRyYWN0ZWQgPSBtYXRjaFsxXS50cmltKClcbiAgICAgIFxuICAgICAgLy8gUmVtb3ZlIGFueSB0cmFpbGluZyBzeXN0ZW0gcHJvbXB0cyB0aGF0IG1pZ2h0IGhhdmUgYmVlbiBpbmNsdWRlZFxuICAgICAgZXh0cmFjdGVkID0gZXh0cmFjdGVkLnJlcGxhY2UoL1xcblxcbi4qUGxlYXNlIChpbXByb3ZlfHN1bW1hcml6ZXxleHBhbmR8Z2VuZXJhdGUpLiokL2lzLCAnJylcbiAgICAgIFxuICAgICAgcmV0dXJuIGV4dHJhY3RlZFxuICAgIH1cbiAgfVxuICBcbiAgLy8gSWYgbm8gcGF0dGVybiBtYXRjaGVzLCByZXR1cm4gdGhlIG9yaWdpbmFsIG1lc3NhZ2VcbiAgcmV0dXJuIG1lc3NhZ2UudHJpbSgpXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZhbGxiYWNrU3VtbWFyeSh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICBpZiAoIXRleHQgfHwgdGV4dC5sZW5ndGggPCA1MCkge1xuICAgIHJldHVybiB0ZXh0XG4gIH1cbiAgXG4gIC8vIEZvciBsb25nZXIgdGV4dCwgY3JlYXRlIGEgbWVhbmluZ2Z1bCBzdW1tYXJ5XG4gIGNvbnN0IHNlbnRlbmNlcyA9IHRleHQuc3BsaXQoL1suIT9dKy8pLmZpbHRlcihzID0+IHMudHJpbSgpLmxlbmd0aCA+IDApXG4gIFxuICBpZiAoc2VudGVuY2VzLmxlbmd0aCA8PSAxKSB7XG4gICAgcmV0dXJuIHRleHRcbiAgfVxuICBcbiAgaWYgKHNlbnRlbmNlcy5sZW5ndGggPT09IDIpIHtcbiAgICByZXR1cm4gc2VudGVuY2VzWzBdLnRyaW0oKSArICcuJ1xuICB9XG4gIFxuICAvLyBUYWtlIGZpcnN0IGFuZCBtb3N0IGltcG9ydGFudCBzZW50ZW5jZVxuICBjb25zdCBmaXJzdFNlbnRlbmNlID0gc2VudGVuY2VzWzBdLnRyaW0oKSArICcuJ1xuICBcbiAgLy8gSWYgdGV4dCBpcyB2ZXJ5IGxvbmcsIGNyZWF0ZSBhIG1vcmUgY29tcHJlaGVuc2l2ZSBzdW1tYXJ5XG4gIGlmICh0ZXh0Lmxlbmd0aCA+IDMwMCkge1xuICAgIGNvbnN0IGtleVdvcmRzID0gWydpbXBvcnRhbnQnLCAna2V5JywgJ21haW4nLCAnc2lnbmlmaWNhbnQnLCAnZXNzZW50aWFsJywgJ2NyaXRpY2FsJ11cbiAgICBjb25zdCBpbXBvcnRhbnRTZW50ZW5jZSA9IHNlbnRlbmNlcy5maW5kKHMgPT4gXG4gICAgICBrZXlXb3Jkcy5zb21lKHdvcmQgPT4gcy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHdvcmQpKVxuICAgIClcbiAgICBcbiAgICBpZiAoaW1wb3J0YW50U2VudGVuY2UpIHtcbiAgICAgIHJldHVybiBgJHtmaXJzdFNlbnRlbmNlfSAke2ltcG9ydGFudFNlbnRlbmNlLnRyaW0oKX0uYFxuICAgIH1cbiAgICBcbiAgICAvLyBGYWxsYmFjayB0byBmaXJzdCBhbmQgbGFzdCBzZW50ZW5jZVxuICAgIGNvbnN0IGxhc3RTZW50ZW5jZSA9IHNlbnRlbmNlc1tzZW50ZW5jZXMubGVuZ3RoIC0gMV0udHJpbSgpICsgJy4nXG4gICAgcmV0dXJuIGAke2ZpcnN0U2VudGVuY2V9ICR7bGFzdFNlbnRlbmNlfWBcbiAgfVxuICBcbiAgcmV0dXJuIGZpcnN0U2VudGVuY2Vcbn1cblxuZnVuY3Rpb24gY3JlYXRlRmFsbGJhY2tFeHBhbnNpb24odGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgaWYgKCF0ZXh0KSByZXR1cm4gdGV4dFxuICBcbiAgLy8gQ2xlYW4gYW5kIGFuYWx5emUgdGhlIGlucHV0IHRleHRcbiAgY29uc3QgY2xlYW5UZXh0ID0gdGV4dC50cmltKClcbiAgY29uc3QgbG93ZXJjYXNlVGV4dCA9IGNsZWFuVGV4dC50b0xvd2VyQ2FzZSgpXG4gIFxuICAvLyBGb3IgdmVyeSBzaG9ydCBpbnB1dHMsIGNyZWF0ZSBtZWFuaW5nZnVsIGV4cGFuc2lvbnMgYmFzZWQgb24gY29udGVudFxuICBpZiAoY2xlYW5UZXh0Lmxlbmd0aCA8IDEwMCkge1xuICAgIC8vIEZvb2QtcmVsYXRlZCBjb250ZW50XG4gICAgaWYgKGxvd2VyY2FzZVRleHQuaW5jbHVkZXMoJ2FwcGxlJykgfHwgbG93ZXJjYXNlVGV4dC5pbmNsdWRlcygnZnJ1aXQnKSkge1xuICAgICAgcmV0dXJuIGAke2NsZWFuVGV4dH1cblxuQXBwbGVzIGFyZSBvbmUgb2YgdGhlIG1vc3QgcG9wdWxhciBhbmQgbnV0cml0aW91cyBmcnVpdHMgd29ybGR3aWRlLiBUaGV5IGNvbWUgaW4gbWFueSB2YXJpZXRpZXMsIGVhY2ggd2l0aCB1bmlxdWUgZmxhdm9ycywgdGV4dHVyZXMsIGFuZCBjb2xvcnMuIEZyb20gdGhlIGNyaXNwIHN3ZWV0bmVzcyBvZiBIb25leWNyaXNwIHRvIHRoZSB0YXJ0IGJpdGUgb2YgR3Jhbm55IFNtaXRoLCBhcHBsZXMgb2ZmZXIgZGl2ZXJzZSB0YXN0ZSBleHBlcmllbmNlcy5cblxuQmV5b25kIHRoZWlyIGRlbGljaW91cyB0YXN0ZSwgYXBwbGVzIGFyZSBwYWNrZWQgd2l0aCBudXRyaWVudHMgaW5jbHVkaW5nIGZpYmVyLCB2aXRhbWluIEMsIGFuZCBhbnRpb3hpZGFudHMuIFRoZSBzYXlpbmcgXCJhbiBhcHBsZSBhIGRheSBrZWVwcyB0aGUgZG9jdG9yIGF3YXlcIiByZWZsZWN0cyB0aGVpciBoZWFsdGggYmVuZWZpdHMsIHdoaWNoIGluY2x1ZGUgc3VwcG9ydGluZyBoZWFydCBoZWFsdGgsIGFpZGluZyBkaWdlc3Rpb24sIGFuZCBwb3RlbnRpYWxseSByZWR1Y2luZyB0aGUgcmlzayBvZiBjaHJvbmljIGRpc2Vhc2VzLlxuXG5BcHBsZXMgYXJlIGFsc28gaW5jcmVkaWJseSB2ZXJzYXRpbGUgaW4gY29va2luZyBhbmQgYmFraW5nLCBmcm9tIHNpbXBsZSBzbmFja3MgdG8gZWxhYm9yYXRlIGRlc3NlcnRzIGxpa2UgYXBwbGUgcGllLCBtYWtpbmcgdGhlbSBhIGJlbG92ZWQgaW5ncmVkaWVudCBpbiBjdWlzaW5lcyBhcm91bmQgdGhlIHdvcmxkLmBcbiAgICB9XG4gICAgXG4gICAgLy8gTG92ZS9lbW90aW9uLXJlbGF0ZWQgY29udGVudFxuICAgIGVsc2UgaWYgKGxvd2VyY2FzZVRleHQuaW5jbHVkZXMoJ2xvdmUnKSAmJiAhbG93ZXJjYXNlVGV4dC5pbmNsdWRlcygnYnVzaW5lc3MnKSkge1xuICAgICAgcmV0dXJuIGAke2NsZWFuVGV4dH1cblxuTG92ZSBpcyBvbmUgb2YgdGhlIG1vc3QgcG93ZXJmdWwgYW5kIGNvbXBsZXggaHVtYW4gZW1vdGlvbnMuIEl0IG1hbmlmZXN0cyBpbiBtYW55IGZvcm1zIC0gZnJvbSByb21hbnRpYyBsb3ZlIGJldHdlZW4gcGFydG5lcnMgdG8gdGhlIGRlZXAgYWZmZWN0aW9uIHdlIGZlZWwgZm9yIGZhbWlseSwgZnJpZW5kcywgb3IgZXZlbiBzaW1wbGUgcGxlYXN1cmVzIGluIGxpZmUuXG5cbldoZW4gd2UgZXhwcmVzcyBsb3ZlIGZvciBzb21ldGhpbmcsIHdoZXRoZXIgaXQncyBhIHBlcnNvbiwgb2JqZWN0LCBvciBleHBlcmllbmNlLCB3ZSdyZSBhY2tub3dsZWRnaW5nIGl0cyBwb3NpdGl2ZSBpbXBhY3Qgb24gb3VyIHdlbGwtYmVpbmcgYW5kIGhhcHBpbmVzcy4gVGhpcyBhcHByZWNpYXRpb24gY2FuIGJyaW5nIGpveSwgY29tZm9ydCwgYW5kIG1lYW5pbmcgdG8gb3VyIGRhaWx5IGxpdmVzLlxuXG5UaGUgdGhpbmdzIHdlIGxvdmUgb2Z0ZW4gcmVmbGVjdCBvdXIgdmFsdWVzLCBtZW1vcmllcywgYW5kIHBlcnNvbmFsIGNvbm5lY3Rpb25zLiBUaGV5IGJlY29tZSBwYXJ0IG9mIG91ciBpZGVudGl0eSBhbmQgY2FuIHByb3ZpZGUgZW1vdGlvbmFsIGFuY2hvcmluZyBkdXJpbmcgY2hhbGxlbmdpbmcgdGltZXMuYFxuICAgIH1cbiAgICBcbiAgICAvLyBUZWNobm9sb2d5LXJlbGF0ZWQgY29udGVudFxuICAgIGVsc2UgaWYgKGxvd2VyY2FzZVRleHQuaW5jbHVkZXMoJ2FpJykgfHwgbG93ZXJjYXNlVGV4dC5pbmNsdWRlcygnYXJ0aWZpY2lhbCBpbnRlbGxpZ2VuY2UnKSB8fCBsb3dlcmNhc2VUZXh0LmluY2x1ZGVzKCd0ZWNobm9sb2d5JykpIHtcbiAgICAgIHJldHVybiBgJHtjbGVhblRleHR9XG5cbkFydGlmaWNpYWwgSW50ZWxsaWdlbmNlIHJlcHJlc2VudHMgb25lIG9mIHRoZSBtb3N0IHNpZ25pZmljYW50IHRlY2hub2xvZ2ljYWwgYWR2YW5jZXMgb2Ygb3VyIHRpbWUuIEl0IGVuY29tcGFzc2VzIG1hY2hpbmUgbGVhcm5pbmcsIG5hdHVyYWwgbGFuZ3VhZ2UgcHJvY2Vzc2luZywgY29tcHV0ZXIgdmlzaW9uLCBhbmQgcm9ib3RpY3MuIEFJIHN5c3RlbXMgY2FuIGxlYXJuIGZyb20gZGF0YSwgbWFrZSBkZWNpc2lvbnMsIGFuZCBwZXJmb3JtIHRhc2tzIHRoYXQgdHJhZGl0aW9uYWxseSByZXF1aXJlZCBodW1hbiBpbnRlbGxpZ2VuY2UuXG5cblRoZSBhcHBsaWNhdGlvbnMgb2YgQUkgc3BhbiBhY3Jvc3MgbnVtZXJvdXMgZmllbGRzIGluY2x1ZGluZyBoZWFsdGhjYXJlLCBlZHVjYXRpb24sIGZpbmFuY2UsIHRyYW5zcG9ydGF0aW9uLCBhbmQgZW50ZXJ0YWlubWVudC4gQXMgQUkgdGVjaG5vbG9neSBjb250aW51ZXMgdG8gZXZvbHZlLCBpdCBwcm9taXNlcyB0byByZXNoYXBlIGhvdyB3ZSB3b3JrLCBsaXZlLCBhbmQgaW50ZXJhY3Qgd2l0aCB0ZWNobm9sb2d5LlxuXG5LZXkgYXJlYXMgb2YgQUkgZGV2ZWxvcG1lbnQgaW5jbHVkZSBkZWVwIGxlYXJuaW5nLCBuZXVyYWwgbmV0d29ya3MsIGFuZCBhdXRvbWF0ZWQgZGVjaXNpb24tbWFraW5nIHN5c3RlbXMgdGhhdCBhcmUgdHJhbnNmb3JtaW5nIGluZHVzdHJpZXMgYW5kIGNyZWF0aW5nIG5ldyBwb3NzaWJpbGl0aWVzIGZvciBpbm5vdmF0aW9uLmBcbiAgICB9XG4gICAgXG4gICAgLy8gQnVzaW5lc3MtcmVsYXRlZCBjb250ZW50XG4gICAgZWxzZSBpZiAobG93ZXJjYXNlVGV4dC5pbmNsdWRlcygnYnVzaW5lc3MnKSB8fCBsb3dlcmNhc2VUZXh0LmluY2x1ZGVzKCdjb21wYW55JykgfHwgbG93ZXJjYXNlVGV4dC5pbmNsdWRlcygnd29yaycpKSB7XG4gICAgICByZXR1cm4gYCR7Y2xlYW5UZXh0fVxuXG5JbiB0b2RheSdzIGNvbXBldGl0aXZlIG1hcmtldHBsYWNlLCBidXNpbmVzc2VzIG11c3QgYWRhcHQgdG8gY2hhbmdpbmcgY29uc3VtZXIgZGVtYW5kcyBhbmQgdGVjaG5vbG9naWNhbCBhZHZhbmNlbWVudHMuIFN1Y2Nlc3NmdWwgY29tcGFuaWVzIGZvY3VzIG9uIGlubm92YXRpb24sIGN1c3RvbWVyIHNhdGlzZmFjdGlvbiwgYW5kIG9wZXJhdGlvbmFsIGVmZmljaWVuY3kuXG5cbktleSBmYWN0b3JzIGZvciBidXNpbmVzcyBzdWNjZXNzIGluY2x1ZGUgc3RyYXRlZ2ljIHBsYW5uaW5nLCBlZmZlY3RpdmUgbGVhZGVyc2hpcCwgZmluYW5jaWFsIG1hbmFnZW1lbnQsIGFuZCB0aGUgYWJpbGl0eSB0byBhZGFwdCB0byBtYXJrZXQgY2hhbmdlcy4gTW9kZXJuIGJ1c2luZXNzZXMgYWxzbyBuZWVkIHRvIGNvbnNpZGVyIGRpZ2l0YWwgdHJhbnNmb3JtYXRpb24sIHN1c3RhaW5hYmlsaXR5LCBhbmQgY29ycG9yYXRlIHNvY2lhbCByZXNwb25zaWJpbGl0eSBhcyBlc3NlbnRpYWwgY29tcG9uZW50cyBvZiB0aGVpciBzdHJhdGVneS5cblxuVGhlIGJ1c2luZXNzIGxhbmRzY2FwZSBjb250aW51ZXMgdG8gZXZvbHZlIHdpdGggZW1lcmdpbmcgdGVjaG5vbG9naWVzLCBjaGFuZ2luZyB3b3JrIHBhdHRlcm5zLCBhbmQgZ2xvYmFsIGVjb25vbWljIHNoaWZ0cyByZXF1aXJpbmcgb3JnYW5pemF0aW9ucyB0byByZW1haW4gYWdpbGUgYW5kIGZvcndhcmQtdGhpbmtpbmcuYFxuICAgIH1cbiAgICBcbiAgICAvLyBMZWFybmluZy9lZHVjYXRpb24gY29udGVudFxuICAgIGVsc2UgaWYgKGxvd2VyY2FzZVRleHQuaW5jbHVkZXMoJ2xlYXJuJykgfHwgbG93ZXJjYXNlVGV4dC5pbmNsdWRlcygnc3R1ZHknKSB8fCBsb3dlcmNhc2VUZXh0LmluY2x1ZGVzKCdlZHVjYXRpb24nKSkge1xuICAgICAgcmV0dXJuIGAke2NsZWFuVGV4dH1cblxuTGVhcm5pbmcgaXMgYSBsaWZlbG9uZyBqb3VybmV5IHRoYXQgZW5yaWNoZXMgb3VyIHVuZGVyc3RhbmRpbmcgb2YgdGhlIHdvcmxkIGFuZCBvdXJzZWx2ZXMuIFdoZXRoZXIgYWNxdWlyaW5nIG5ldyBza2lsbHMsIGV4cGxvcmluZyBhY2FkZW1pYyBzdWJqZWN0cywgb3IgZ2FpbmluZyBwcmFjdGljYWwga25vd2xlZGdlLCBlZHVjYXRpb24gb3BlbnMgZG9vcnMgdG8gb3Bwb3J0dW5pdGllcyBhbmQgcGVyc29uYWwgZ3Jvd3RoLlxuXG5FZmZlY3RpdmUgbGVhcm5pbmcgaW52b2x2ZXMgdmFyaW91cyBhcHByb2FjaGVzIGluY2x1ZGluZyBoYW5kcy1vbiBwcmFjdGljZSwgdGhlb3JldGljYWwgc3R1ZHksIGNvbGxhYm9yYXRpb24gd2l0aCBvdGhlcnMsIGFuZCByZWZsZWN0aW9uIG9uIGV4cGVyaWVuY2VzLiBNb2Rlcm4gbGVhcm5pbmcgZW52aXJvbm1lbnRzIGJsZW5kIHRyYWRpdGlvbmFsIG1ldGhvZHMgd2l0aCBkaWdpdGFsIHRvb2xzIGFuZCByZXNvdXJjZXMuXG5cblRoZSBrZXkgdG8gc3VjY2Vzc2Z1bCBsZWFybmluZyBpcyBtYWludGFpbmluZyBjdXJpb3NpdHksIHNldHRpbmcgY2xlYXIgZ29hbHMsIGFuZCBiZWluZyBvcGVuIHRvIGRpZmZlcmVudCBwZXJzcGVjdGl2ZXMgYW5kIG1ldGhvZG9sb2dpZXMuIENvbnRpbnVvdXMgbGVhcm5pbmcgaGVscHMgdXMgYWRhcHQgdG8gY2hhbmdpbmcgY2lyY3Vtc3RhbmNlcyBhbmQgcmVtYWluIGVuZ2FnZWQgd2l0aCBvdXIgZXZvbHZpbmcgd29ybGQuYFxuICAgIH1cbiAgICBcbiAgICAvLyBIZWFsdGgvd2VsbG5lc3MgY29udGVudFxuICAgIGVsc2UgaWYgKGxvd2VyY2FzZVRleHQuaW5jbHVkZXMoJ2hlYWx0aCcpIHx8IGxvd2VyY2FzZVRleHQuaW5jbHVkZXMoJ3dlbGxuZXNzJykgfHwgbG93ZXJjYXNlVGV4dC5pbmNsdWRlcygnZXhlcmNpc2UnKSkge1xuICAgICAgcmV0dXJuIGAke2NsZWFuVGV4dH1cblxuSGVhbHRoIGFuZCB3ZWxsbmVzcyBlbmNvbXBhc3MgcGh5c2ljYWwsIG1lbnRhbCwgYW5kIGVtb3Rpb25hbCB3ZWxsLWJlaW5nLiBNYWludGFpbmluZyBnb29kIGhlYWx0aCByZXF1aXJlcyBhIGJhbGFuY2VkIGFwcHJvYWNoIGluY2x1ZGluZyByZWd1bGFyIGV4ZXJjaXNlLCBwcm9wZXIgbnV0cml0aW9uLCBhZGVxdWF0ZSBzbGVlcCwgYW5kIHN0cmVzcyBtYW5hZ2VtZW50LlxuXG5QaHlzaWNhbCBhY3Rpdml0eSBzdHJlbmd0aGVucyB0aGUgYm9keSwgaW1wcm92ZXMgY2FyZGlvdmFzY3VsYXIgaGVhbHRoLCBhbmQgYm9vc3RzIG1lbnRhbCB3ZWxsLWJlaW5nIHRocm91Z2ggdGhlIHJlbGVhc2Ugb2YgZW5kb3JwaGlucy4gQSBiYWxhbmNlZCBkaWV0IHByb3ZpZGVzIGVzc2VudGlhbCBudXRyaWVudHMgdGhhdCBmdWVsIG91ciBib2RpZXMgYW5kIHN1cHBvcnQgb3B0aW1hbCBmdW5jdGlvbi5cblxuTWVudGFsIHdlbGxuZXNzIGlzIGVxdWFsbHkgaW1wb3J0YW50LCBpbnZvbHZpbmcgcHJhY3RpY2VzIGxpa2UgbWluZGZ1bG5lc3MsIHNvY2lhbCBjb25uZWN0aW9uLCBhbmQgcHVyc3VpbmcgYWN0aXZpdGllcyB0aGF0IGJyaW5nIGpveSBhbmQgZnVsZmlsbG1lbnQuIFRha2luZyBhIGhvbGlzdGljIGFwcHJvYWNoIHRvIGhlYWx0aCBjcmVhdGVzIGEgZm91bmRhdGlvbiBmb3IgYSB2aWJyYW50LCBwcm9kdWN0aXZlIGxpZmUuYFxuICAgIH1cbiAgICBcbiAgICAvLyBUcmF2ZWwtcmVsYXRlZCBjb250ZW50XG4gICAgZWxzZSBpZiAobG93ZXJjYXNlVGV4dC5pbmNsdWRlcygndHJhdmVsJykgfHwgbG93ZXJjYXNlVGV4dC5pbmNsdWRlcygndHJpcCcpIHx8IGxvd2VyY2FzZVRleHQuaW5jbHVkZXMoJ3ZhY2F0aW9uJykpIHtcbiAgICAgIHJldHVybiBgJHtjbGVhblRleHR9XG5cblRyYXZlbCBicm9hZGVucyBob3Jpem9ucyBhbmQgY3JlYXRlcyBsYXN0aW5nIG1lbW9yaWVzIHRocm91Z2ggZXhwb3N1cmUgdG8gbmV3IGN1bHR1cmVzLCBlbnZpcm9ubWVudHMsIGFuZCBleHBlcmllbmNlcy4gV2hldGhlciBleHBsb3JpbmcgZGlzdGFudCBjb3VudHJpZXMgb3IgZGlzY292ZXJpbmcgaGlkZGVuIGdlbXMgY2xvc2UgdG8gaG9tZSwgdHJhdmVsIGVucmljaGVzIG91ciBwZXJzcGVjdGl2ZSBhbmQgdW5kZXJzdGFuZGluZyBvZiB0aGUgd29ybGQuXG5cblBsYW5uaW5nIGEgdHJpcCBpbnZvbHZlcyBjb25zaWRlcmluZyBkZXN0aW5hdGlvbnMsIGFjY29tbW9kYXRpb25zLCB0cmFuc3BvcnRhdGlvbiwgYW5kIGFjdGl2aXRpZXMgdGhhdCBhbGlnbiB3aXRoIHBlcnNvbmFsIGludGVyZXN0cyBhbmQgYnVkZ2V0LiBUaGUgam91cm5leSBpdHNlbGYgb2Z0ZW4gcHJvdmlkZXMgdW5leHBlY3RlZCBkaXNjb3ZlcmllcyBhbmQgY29ubmVjdGlvbnMgd2l0aCBwZW9wbGUgYW5kIHBsYWNlcy5cblxuVHJhdmVsIGV4cGVyaWVuY2VzIGNvbnRyaWJ1dGUgdG8gcGVyc29uYWwgZ3Jvd3RoLCBjdWx0dXJhbCBhd2FyZW5lc3MsIGFuZCBhcHByZWNpYXRpb24gZm9yIGRpdmVyc2l0eS4gVGhleSBjcmVhdGUgc3RvcmllcyBhbmQgbWVtb3JpZXMgdGhhdCBsYXN0IGEgbGlmZXRpbWUgd2hpbGUgZm9zdGVyaW5nIGFkYXB0YWJpbGl0eSBhbmQgY29uZmlkZW5jZSBpbiBuYXZpZ2F0aW5nIG5ldyBzaXR1YXRpb25zLmBcbiAgICB9XG4gICAgXG4gICAgLy8gR2VuZXJpYyBtZWFuaW5nZnVsIGV4cGFuc2lvbiBmb3Igb3RoZXIgc2hvcnQgY29udGVudFxuICAgIGVsc2Uge1xuICAgICAgLy8gRXh0cmFjdCBrZXkgY29uY2VwdHMgZnJvbSB0aGUgdGV4dFxuICAgICAgY29uc3Qgd29yZHMgPSBjbGVhblRleHQuc3BsaXQoL1xccysvKS5maWx0ZXIodyA9PiB3Lmxlbmd0aCA+IDMpXG4gICAgICBjb25zdCBrZXlXb3JkID0gd29yZHNbMF0gfHwgJ3RvcGljJ1xuICAgICAgXG4gICAgICByZXR1cm4gYCR7Y2xlYW5UZXh0fVxuXG5UaGlzICR7a2V5V29yZC50b0xvd2VyQ2FzZSgpfSByZXByZXNlbnRzIGFuIGludGVyZXN0aW5nIHN1YmplY3Qgd29ydGggZXhwbG9yaW5nIGZ1cnRoZXIuIFVuZGVyc3RhbmRpbmcgaXRzIHZhcmlvdXMgYXNwZWN0cyBjYW4gcHJvdmlkZSB2YWx1YWJsZSBpbnNpZ2h0cyBhbmQgZGVlcGVyIGFwcHJlY2lhdGlvbiBmb3IgaXRzIHNpZ25pZmljYW5jZS5cblxuVGhlcmUgYXJlIG9mdGVuIG11bHRpcGxlIGRpbWVuc2lvbnMgdG8gY29uc2lkZXIgLSBoaXN0b3JpY2FsIGNvbnRleHQsIGN1cnJlbnQgcmVsZXZhbmNlLCBhbmQgZnV0dXJlIGltcGxpY2F0aW9ucy4gRWFjaCBwZXJzcGVjdGl2ZSBjYW4gcmV2ZWFsIG5ldyBsYXllcnMgb2YgbWVhbmluZyBhbmQgdW5kZXJzdGFuZGluZy5cblxuRXhhbWluaW5nIHJlbGF0ZWQgY29uY2VwdHMgYW5kIHRoZWlyIGNvbm5lY3Rpb25zIGNhbiBlbmhhbmNlIG91ciBvdmVyYWxsIGNvbXByZWhlbnNpb24gYW5kIHByb3ZpZGUgYSBtb3JlIGNvbXBsZXRlIHBpY3R1cmUgb2YgdGhlIHN1YmplY3QgbWF0dGVyLmBcbiAgICB9XG4gIH1cbiAgXG4gIC8vIEZvciBsb25nZXIgdGV4dCwgcHJvdmlkZSBtb3JlIHNvcGhpc3RpY2F0ZWQgZXhwYW5zaW9uXG4gIGVsc2Uge1xuICAgIC8vIEFuYWx5emUgY29udGVudCBmb3Iga2V5IHRoZW1lc1xuICAgIGlmIChsb3dlcmNhc2VUZXh0LmluY2x1ZGVzKCdhaScpICYmIGxvd2VyY2FzZVRleHQuaW5jbHVkZXMoJ2J1c2luZXNzJykpIHtcbiAgICAgIHJldHVybiBgJHtjbGVhblRleHR9XG5cbkFydGlmaWNpYWwgSW50ZWxsaWdlbmNlIGhhcyBiZWNvbWUgYSBjb3JuZXJzdG9uZSBvZiBtb2Rlcm4gYnVzaW5lc3Mgc3RyYXRlZ3kuIENvbXBhbmllcyBhcmUgbGV2ZXJhZ2luZyBBSSB0ZWNobm9sb2dpZXMgdG8gYXV0b21hdGUgcHJvY2Vzc2VzLCBlbmhhbmNlIGN1c3RvbWVyIGV4cGVyaWVuY2VzLCBhbmQgZ2FpbiBjb21wZXRpdGl2ZSBhZHZhbnRhZ2VzLiBGcm9tIHByZWRpY3RpdmUgYW5hbHl0aWNzIHRvIGNoYXRib3RzLCBBSSBhcHBsaWNhdGlvbnMgYXJlIHRyYW5zZm9ybWluZyBob3cgYnVzaW5lc3NlcyBvcGVyYXRlLlxuXG5LZXkgYXJlYXMgd2hlcmUgQUkgaW1wYWN0cyBidXNpbmVzcyBpbmNsdWRlIGN1c3RvbWVyIHNlcnZpY2UgYXV0b21hdGlvbiwgZGF0YSBhbmFseXNpcyBhbmQgaW5zaWdodHMsIHByb2Nlc3Mgb3B0aW1pemF0aW9uLCBwcmVkaWN0aXZlIG1haW50ZW5hbmNlLCBhbmQgbWFya2V0aW5nIHBlcnNvbmFsaXphdGlvbi4gVGhlIGFkb3B0aW9uIG9mIEFJIGluIGJ1c2luZXNzIGNvbnRpbnVlcyB0byBncm93IGFzIG9yZ2FuaXphdGlvbnMgcmVjb2duaXplIGl0cyBwb3RlbnRpYWwgdG8gZHJpdmUgZWZmaWNpZW5jeSBhbmQgaW5ub3ZhdGlvbi5cblxuSG93ZXZlciwgaW1wbGVtZW50aW5nIEFJIGluIGJ1c2luZXNzIGFsc28gcHJlc2VudHMgY2hhbGxlbmdlcyBpbmNsdWRpbmcgZGF0YSBwcml2YWN5IGNvbmNlcm5zLCB0aGUgbmVlZCBmb3Igc2tpbGxlZCB0YWxlbnQsIGFuZCBlbnN1cmluZyBldGhpY2FsIEFJIHByYWN0aWNlcy4gU3VjY2Vzc2Z1bCBBSSBhZG9wdGlvbiByZXF1aXJlcyBjYXJlZnVsIHBsYW5uaW5nLCBzdGFrZWhvbGRlciBidXktaW4sIGFuZCBvbmdvaW5nIGV2YWx1YXRpb24gb2YgcmVzdWx0cy5gXG4gICAgfVxuICAgIFxuICAgIC8vIEdlbmVyaWMgZXhwYW5zaW9uIGZvciBsb25nZXIgY29udGVudFxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuIGAke2NsZWFuVGV4dH1cblxuVGhpcyB0b3BpYyBwcmVzZW50cyBtdWx0aXBsZSBmYWNldHMgdGhhdCBtZXJpdCBkZWVwZXIgZXhwbG9yYXRpb24uIFVuZGVyc3RhbmRpbmcgdGhlIHVuZGVybHlpbmcgcHJpbmNpcGxlcyBhbmQgYnJvYWRlciBpbXBsaWNhdGlvbnMgY2FuIHByb3ZpZGUgdmFsdWFibGUgaW5zaWdodHMgZm9yIGRlY2lzaW9uLW1ha2luZyBhbmQgZnV0dXJlIHBsYW5uaW5nLlxuXG5Db25zaWRlciBleGFtaW5pbmcgdGhlIGhpc3RvcmljYWwgY29udGV4dCwgY3VycmVudCB0cmVuZHMsIGFuZCBwb3RlbnRpYWwgZnV0dXJlIGRldmVsb3BtZW50cyByZWxhdGVkIHRvIHRoaXMgc3ViamVjdC4gQW5hbHl6aW5nIGRpZmZlcmVudCBwZXJzcGVjdGl2ZXMgYW5kIGFwcHJvYWNoZXMgY2FuIHJldmVhbCBuZXcgb3Bwb3J0dW5pdGllcyBhbmQgY29uc2lkZXJhdGlvbnMuXG5cbkFkZGl0aW9uYWwgcmVzZWFyY2ggZnJvbSBleHBlcnQgc291cmNlcywgY2FzZSBzdHVkaWVzLCBhbmQgcmVhbC13b3JsZCBleGFtcGxlcyBjb3VsZCBmdXJ0aGVyIGVuaGFuY2UgdW5kZXJzdGFuZGluZyBhbmQgcHJvdmlkZSBwcmFjdGljYWwgYXBwbGljYXRpb25zIG9mIHRoZXNlIGNvbmNlcHRzLmBcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlRmFsbGJhY2tJbXByb3ZlbWVudCh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICBpZiAoIXRleHQpIHJldHVybiB0ZXh0XG4gIFxuICAvLyBSZW1vdmUgZHVwbGljYXRlZCBzZW50ZW5jZXMvcGhyYXNlc1xuICBsZXQgaW1wcm92ZWQgPSB0ZXh0XG4gIFxuICAvLyBTcGxpdCBpbnRvIHNlbnRlbmNlcyBhbmQgcmVtb3ZlIGR1cGxpY2F0ZXNcbiAgY29uc3Qgc2VudGVuY2VzID0gaW1wcm92ZWQuc3BsaXQoL1suIT9dKy8pLmZpbHRlcihzID0+IHMudHJpbSgpLmxlbmd0aCA+IDApXG4gIGNvbnN0IHVuaXF1ZVNlbnRlbmNlcyA9IFtdXG4gIGNvbnN0IHNlZW4gPSBuZXcgU2V0KClcbiAgXG4gIGZvciAoY29uc3Qgc2VudGVuY2Ugb2Ygc2VudGVuY2VzKSB7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHNlbnRlbmNlLnRyaW0oKS50b0xvd2VyQ2FzZSgpXG4gICAgaWYgKCFzZWVuLmhhcyhub3JtYWxpemVkKSAmJiBub3JtYWxpemVkLmxlbmd0aCA+IDApIHtcbiAgICAgIHNlZW4uYWRkKG5vcm1hbGl6ZWQpXG4gICAgICB1bmlxdWVTZW50ZW5jZXMucHVzaChzZW50ZW5jZS50cmltKCkpXG4gICAgfVxuICB9XG4gIFxuICAvLyBSZWpvaW4gc2VudGVuY2VzXG4gIGltcHJvdmVkID0gdW5pcXVlU2VudGVuY2VzLmpvaW4oJy4gJylcbiAgXG4gIC8vIEJhc2ljIHRleHQgaW1wcm92ZW1lbnRzXG4gIGltcHJvdmVkID0gaW1wcm92ZWRcbiAgICAucmVwbGFjZSgvXFxzKy9nLCAnICcpIC8vIG5vcm1hbGl6ZSBzcGFjZXNcbiAgICAucmVwbGFjZSgvKFsuIT9dKVxccyooW2Etel0pL2csICckMSAkMicpIC8vIHByb3BlciBzcGFjaW5nIGFmdGVyIHNlbnRlbmNlc1xuICAgIC5yZXBsYWNlKC9cXGJpXFxiL2csICdJJykgLy8gY2FwaXRhbGl6ZSAnaSdcbiAgICAucmVwbGFjZSgvKFsuIT9dKVxccyokLywgJyQxJykgLy8gZW5zdXJlIHByb3BlciBlbmRpbmdcbiAgICAudHJpbSgpXG4gIFxuICAvLyBFbnN1cmUgaXQgc3RhcnRzIHdpdGggY2FwaXRhbCBsZXR0ZXJcbiAgaWYgKGltcHJvdmVkLmxlbmd0aCA+IDApIHtcbiAgICBpbXByb3ZlZCA9IGltcHJvdmVkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgaW1wcm92ZWQuc2xpY2UoMSlcbiAgfVxuICBcbiAgLy8gQWRkIHBlcmlvZCBpZiBtaXNzaW5nXG4gIGlmIChpbXByb3ZlZC5sZW5ndGggPiAwICYmICEvWy4hP10kLy50ZXN0KGltcHJvdmVkKSkge1xuICAgIGltcHJvdmVkICs9ICcuJ1xuICB9XG4gIFxuICAvLyBJZiB0aGUgaW1wcm92ZW1lbnQgZGlkbid0IGNoYW5nZSBtdWNoLCBwcm92aWRlIGEgYmV0dGVyIHZlcnNpb25cbiAgaWYgKGltcHJvdmVkID09PSB0ZXh0IHx8IGltcHJvdmVkLmxlbmd0aCA8IHRleHQubGVuZ3RoICogMC41KSB7XG4gICAgLy8gVHJ5IHRvIGltcHJvdmUgc3RydWN0dXJlIGZvciBBSS9idXNpbmVzcyBjb250ZW50XG4gICAgaWYgKHRleHQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnYWknKSAmJiB0ZXh0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2J1c2luZXNzJykpIHtcbiAgICAgIHJldHVybiBcIkFydGlmaWNpYWwgSW50ZWxsaWdlbmNlIGhhcyBiZWNvbWUgYSBjb3JuZXJzdG9uZSBvZiBtb2Rlcm4gYnVzaW5lc3Mgc3RyYXRlZ3ksIHRyYW5zZm9ybWluZyBob3cgY29tcGFuaWVzIG9wZXJhdGUgYW5kIGNvbXBldGUgaW4gdG9kYXkncyBtYXJrZXQuXCJcbiAgICB9XG4gICAgXG4gICAgLy8gR2VuZXJpYyBpbXByb3ZlbWVudFxuICAgIHJldHVybiBpbXByb3ZlZCB8fCB0ZXh0XG4gIH1cbiAgXG4gIHJldHVybiBpbXByb3ZlZFxufVxuXG5mdW5jdGlvbiBjcmVhdGVGYWxsYmFja1RpdGxlKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmICghdGV4dCB8fCB0ZXh0Lmxlbmd0aCA8IDEwKSB7XG4gICAgcmV0dXJuICdRdWljayBOb3RlJ1xuICB9XG4gIFxuICAvLyBUYWtlIHRoZSBmaXJzdCBtZWFuaW5nZnVsIHNlbnRlbmNlIG9yIHBocmFzZVxuICBjb25zdCBmaXJzdFNlbnRlbmNlID0gdGV4dC5zcGxpdCgvWy4hP10vKVswXVxuICBpZiAoZmlyc3RTZW50ZW5jZS5sZW5ndGggPiA1MCkge1xuICAgIHJldHVybiBmaXJzdFNlbnRlbmNlLnN1YnN0cmluZygwLCA0NykgKyAnLi4uJ1xuICB9XG4gIHJldHVybiBmaXJzdFNlbnRlbmNlIHx8ICdOb3RlJ1xufVxuXG5mdW5jdGlvbiBjcmVhdGVGYWxsYmFja1RyYW5zbGF0aW9uKHRleHQ6IHN0cmluZywgdXNlck1lc3NhZ2U6IHN0cmluZyk6IHN0cmluZyB7XG4gIC8vIEV4dHJhY3QgdGFyZ2V0IGxhbmd1YWdlIGZyb20gdGhlIHVzZXIgbWVzc2FnZVxuICBjb25zdCBsYW5ndWFnZU1hdGNoID0gdXNlck1lc3NhZ2UubWF0Y2goL3RyYW5zbGF0ZS4qP3RvXFxzKyhcXHcrKS9pKVxuICBjb25zdCB0YXJnZXRMYW5ndWFnZSA9IGxhbmd1YWdlTWF0Y2ggPyBsYW5ndWFnZU1hdGNoWzFdIDogJ1NwYW5pc2gnXG4gIFxuICBpZiAoIXRleHQgfHwgdGV4dC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIGBUcmFuc2xhdGlvbiB0byAke3RhcmdldExhbmd1YWdlfSBpcyBub3QgYXZhaWxhYmxlIGF0IHRoZSBtb21lbnQuYFxuICB9XG4gIFxuICAvLyBCYXNpYyBmYWxsYmFjayAtIGp1c3QgaW5kaWNhdGUgdHJhbnNsYXRpb24gd291bGQgaGFwcGVuXG4gIHJldHVybiBgW1RyYW5zbGF0aW9uIHRvICR7dGFyZ2V0TGFuZ3VhZ2V9IHdvdWxkIGFwcGVhciBoZXJlLiBPcmlnaW5hbCB0ZXh0OiBcIiR7dGV4dC5zdWJzdHJpbmcoMCwgMTAwKX0ke3RleHQubGVuZ3RoID4gMTAwID8gJy4uLicgOiAnJ31cIl1gXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZhbGxiYWNrQ2hhdChtZXNzYWdlOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCByZXNwb25zZXMgPSBbXG4gICAgXCJUaGF0J3MgYW4gaW50ZXJlc3RpbmcgcG9pbnQhIEknZCBiZSBoYXBweSB0byBoZWxwIHlvdSBleHBsb3JlIHRoaXMgdG9waWMgZnVydGhlci5cIixcbiAgICBcIkkgY2FuIHNlZSB5b3UncmUgd29ya2luZyBvbiBzb21ldGhpbmcgaW1wb3J0YW50LiBMZXQgbWUga25vdyBob3cgSSBjYW4gYXNzaXN0IHlvdSBiZXR0ZXIuXCIsXG4gICAgXCJHcmVhdCBxdWVzdGlvbiEgV2hpbGUgSSBjYW4ndCBhY2Nlc3MgbXkgZnVsbCBjYXBhYmlsaXRpZXMgcmlnaHQgbm93LCBJJ20gaGVyZSB0byBoZWxwIHdpdGggeW91ciBub3Rlcy5cIixcbiAgICBcIkkgYXBwcmVjaWF0ZSB5b3Ugc2hhcmluZyB0aGlzIHdpdGggbWUuIFlvdXIgaWRlYXMgaGF2ZSBwb3RlbnRpYWwgZm9yIGZ1cnRoZXIgZGV2ZWxvcG1lbnQuXCJcbiAgXVxuICBcbiAgcmV0dXJuIHJlc3BvbnNlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiByZXNwb25zZXMubGVuZ3RoKV1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN1bW1hcml6ZVRleHQodGV4dDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgaWYgKCF0ZXh0IHx8ICF0ZXh0LnRyaW0oKSkge1xuICAgIHRocm93IG5ldyBNYW51c0FJRXJyb3IoJ1RleHQgaXMgcmVxdWlyZWQgZm9yIHN1bW1hcml6YXRpb24uJylcbiAgfVxuXG4gIGNvbnN0IHJlcXVlc3Q6IE1hbnVzQUlSZXF1ZXN0ID0ge1xuICAgIG1lc3NhZ2VzOiBbXG4gICAgICB7XG4gICAgICAgIHJvbGU6ICdzeXN0ZW0nLFxuICAgICAgICBjb250ZW50OiAnWW91IGFyZSBhIGhlbHBmdWwgYXNzaXN0YW50IHRoYXQgY3JlYXRlcyBjb25jaXNlLCBpbmZvcm1hdGl2ZSBzdW1tYXJpZXMuIEZvY3VzIG9uIHRoZSBrZXkgcG9pbnRzIGFuZCBtYWluIGlkZWFzIHdoaWxlIG1haW50YWluaW5nIGNsYXJpdHkgYW5kIGNvaGVyZW5jZS4nXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgIGNvbnRlbnQ6IGBQbGVhc2Ugc3VtbWFyaXplIHRoZSBmb2xsb3dpbmcgdGV4dCwga2VlcGluZyB0aGUgbWFpbiBwb2ludHMgYW5kIGtleSBpbmZvcm1hdGlvbjpcXG5cXG4ke3RleHR9YFxuICAgICAgfVxuICAgIF0sXG4gICAgbWF4X3Rva2VuczogNTAwLFxuICAgIHRlbXBlcmF0dXJlOiAwLjNcbiAgfVxuXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2FsbE1hbnVzQUkocmVxdWVzdClcbiAgcmV0dXJuIHJlc3BvbnNlLmNob2ljZXNbMF0/Lm1lc3NhZ2U/LmNvbnRlbnQgfHwgJ05vIHN1bW1hcnkgZ2VuZXJhdGVkLidcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4cGFuZFRleHQodGV4dDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgaWYgKCF0ZXh0IHx8ICF0ZXh0LnRyaW0oKSkge1xuICAgIHRocm93IG5ldyBNYW51c0FJRXJyb3IoJ1RleHQgaXMgcmVxdWlyZWQgZm9yIGV4cGFuc2lvbi4nKVxuICB9XG5cbiAgY29uc3QgcmVxdWVzdDogTWFudXNBSVJlcXVlc3QgPSB7XG4gICAgbWVzc2FnZXM6IFtcbiAgICAgIHtcbiAgICAgICAgcm9sZTogJ3N5c3RlbScsXG4gICAgICAgIGNvbnRlbnQ6ICdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQgdGhhdCBleHBhbmRzIGFuZCBlbGFib3JhdGVzIG9uIHRleHQgY29udGVudC4gQWRkIHJlbGV2YW50IGRldGFpbHMsIGV4YW1wbGVzLCBhbmQgZXhwbGFuYXRpb25zIHdoaWxlIG1haW50YWluaW5nIHRoZSBvcmlnaW5hbCBtZWFuaW5nIGFuZCBjb250ZXh0LidcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgY29udGVudDogYFBsZWFzZSBleHBhbmQgYW5kIGVsYWJvcmF0ZSBvbiB0aGUgZm9sbG93aW5nIHRleHQsIGFkZGluZyByZWxldmFudCBkZXRhaWxzIGFuZCBleGFtcGxlczpcXG5cXG4ke3RleHR9YFxuICAgICAgfVxuICAgIF0sXG4gICAgbWF4X3Rva2VuczogMTAwMCxcbiAgICB0ZW1wZXJhdHVyZTogMC41XG4gIH1cblxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNhbGxNYW51c0FJKHJlcXVlc3QpXG4gIHJldHVybiByZXNwb25zZS5jaG9pY2VzWzBdPy5tZXNzYWdlPy5jb250ZW50IHx8ICdObyBleHBhbnNpb24gZ2VuZXJhdGVkLidcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRyYW5zbGF0ZVRleHQodGV4dDogc3RyaW5nLCB0YXJnZXRMYW5ndWFnZTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgaWYgKCF0ZXh0IHx8ICF0ZXh0LnRyaW0oKSkge1xuICAgIHRocm93IG5ldyBNYW51c0FJRXJyb3IoJ1RleHQgaXMgcmVxdWlyZWQgZm9yIHRyYW5zbGF0aW9uLicpXG4gIH1cblxuICBpZiAoIXRhcmdldExhbmd1YWdlIHx8ICF0YXJnZXRMYW5ndWFnZS50cmltKCkpIHtcbiAgICB0aHJvdyBuZXcgTWFudXNBSUVycm9yKCdUYXJnZXQgbGFuZ3VhZ2UgaXMgcmVxdWlyZWQgZm9yIHRyYW5zbGF0aW9uLicpXG4gIH1cblxuICBjb25zdCByZXF1ZXN0OiBNYW51c0FJUmVxdWVzdCA9IHtcbiAgICBtZXNzYWdlczogW1xuICAgICAge1xuICAgICAgICByb2xlOiAnc3lzdGVtJyxcbiAgICAgICAgY29udGVudDogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB0aGF0IHRyYW5zbGF0ZXMgdGV4dCBhY2N1cmF0ZWx5IHdoaWxlIHByZXNlcnZpbmcgdGhlIG9yaWdpbmFsIG1lYW5pbmcgYW5kIGNvbnRleHQuIFByb3ZpZGUgb25seSB0aGUgdHJhbnNsYXRlZCB0ZXh0IHdpdGhvdXQgYWRkaXRpb25hbCBjb21tZW50YXJ5LidcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgY29udGVudDogYFRyYW5zbGF0ZSB0aGUgZm9sbG93aW5nIHRleHQgdG8gJHt0YXJnZXRMYW5ndWFnZX06XFxuXFxuJHt0ZXh0fWBcbiAgICAgIH1cbiAgICBdLFxuICAgIG1heF90b2tlbnM6IDEwMDAsXG4gICAgdGVtcGVyYXR1cmU6IDAuM1xuICB9XG5cbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjYWxsTWFudXNBSShyZXF1ZXN0KVxuICByZXR1cm4gcmVzcG9uc2UuY2hvaWNlc1swXT8ubWVzc2FnZT8uY29udGVudCB8fCAnTm8gdHJhbnNsYXRpb24gZ2VuZXJhdGVkLidcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGltcHJvdmVUZXh0KHRleHQ6IHN0cmluZywgaW5zdHJ1Y3Rpb25zPzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgaWYgKCF0ZXh0IHx8ICF0ZXh0LnRyaW0oKSkge1xuICAgIHRocm93IG5ldyBNYW51c0FJRXJyb3IoJ1RleHQgaXMgcmVxdWlyZWQgZm9yIGltcHJvdmVtZW50LicpXG4gIH1cblxuICBjb25zdCByZXF1ZXN0OiBNYW51c0FJUmVxdWVzdCA9IHtcbiAgICBtZXNzYWdlczogW1xuICAgICAge1xuICAgICAgICByb2xlOiAnc3lzdGVtJyxcbiAgICAgICAgY29udGVudDogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB0aGF0IGltcHJvdmVzIHRleHQgcXVhbGl0eS4gRm9jdXMgb24gZW5oYW5jaW5nIGNsYXJpdHksIGdyYW1tYXIsIHN0cnVjdHVyZSwgYW5kIHJlYWRhYmlsaXR5IHdoaWxlIHByZXNlcnZpbmcgdGhlIG9yaWdpbmFsIG1lYW5pbmcgYW5kIGludGVudC4nXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgIGNvbnRlbnQ6IHRleHQgLy8gSnVzdCBzZW5kIHRoZSB0ZXh0IGRpcmVjdGx5LCBub3Qgd2l0aCBpbnN0cnVjdGlvbnNcbiAgICAgIH1cbiAgICBdLFxuICAgIG1heF90b2tlbnM6IDEwMDAsXG4gICAgdGVtcGVyYXR1cmU6IDAuNFxuICB9XG5cbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjYWxsTWFudXNBSShyZXF1ZXN0KVxuICByZXR1cm4gcmVzcG9uc2UuY2hvaWNlc1swXT8ubWVzc2FnZT8uY29udGVudCB8fCAnTm8gaW1wcm92ZW1lbnQgZ2VuZXJhdGVkLidcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoYXRXaXRoQUkobWVzc2FnZXM6IEFycmF5PHsgcm9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6IHN0cmluZyB9Pik6IFByb21pc2U8c3RyaW5nPiB7XG4gIGlmICghbWVzc2FnZXMgfHwgbWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgdGhyb3cgbmV3IE1hbnVzQUlFcnJvcignTWVzc2FnZXMgYXJlIHJlcXVpcmVkIGZvciBjaGF0LicpXG4gIH1cblxuICBjb25zdCByZXF1ZXN0OiBNYW51c0FJUmVxdWVzdCA9IHtcbiAgICBtZXNzYWdlczogW1xuICAgICAge1xuICAgICAgICByb2xlOiAnc3lzdGVtJyxcbiAgICAgICAgY29udGVudDogJ1lvdSBhcmUgYSBoZWxwZnVsIEFJIGFzc2lzdGFudCBpbnRlZ3JhdGVkIGludG8gYSBub3RlLXRha2luZyBhcHBsaWNhdGlvbi4gSGVscCB1c2VycyB3aXRoIHRoZWlyIG5vdGVzIGJ5IHByb3ZpZGluZyBpbnNpZ2h0cywgc3VnZ2VzdGlvbnMsIGFuc3dlcmluZyBxdWVzdGlvbnMsIGFuZCBhc3Npc3Rpbmcgd2l0aCBjb250ZW50IGNyZWF0aW9uIGFuZCBvcmdhbml6YXRpb24uJ1xuICAgICAgfSxcbiAgICAgIC4uLm1lc3NhZ2VzLm1hcChtc2cgPT4gKHtcbiAgICAgICAgcm9sZTogbXNnLnJvbGUgYXMgJ3VzZXInIHwgJ2Fzc2lzdGFudCcsXG4gICAgICAgIGNvbnRlbnQ6IG1zZy5jb250ZW50XG4gICAgICB9KSlcbiAgICBdLFxuICAgIG1heF90b2tlbnM6IDgwMCxcbiAgICB0ZW1wZXJhdHVyZTogMC43XG4gIH1cblxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNhbGxNYW51c0FJKHJlcXVlc3QpXG4gIHJldHVybiByZXNwb25zZS5jaG9pY2VzWzBdPy5tZXNzYWdlPy5jb250ZW50IHx8ICdObyByZXNwb25zZSBnZW5lcmF0ZWQuJ1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVUYWdzKHRleHQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgaWYgKCF0ZXh0IHx8ICF0ZXh0LnRyaW0oKSkge1xuICAgIHJldHVybiBbXVxuICB9XG5cbiAgY29uc3QgcmVxdWVzdDogTWFudXNBSVJlcXVlc3QgPSB7XG4gICAgbWVzc2FnZXM6IFtcbiAgICAgIHtcbiAgICAgICAgcm9sZTogJ3N5c3RlbScsXG4gICAgICAgIGNvbnRlbnQ6ICdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQgdGhhdCBnZW5lcmF0ZXMgcmVsZXZhbnQgdGFncyBmb3IgdGV4dCBjb250ZW50LiBSZXR1cm4gb25seSBhIGNvbW1hLXNlcGFyYXRlZCBsaXN0IG9mIDMtNyByZWxldmFudCB0YWdzIGJhc2VkIG9uIHRoZSBjb250ZW50LidcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgY29udGVudDogYEdlbmVyYXRlIHJlbGV2YW50IHRhZ3MgZm9yIHRoZSBmb2xsb3dpbmcgdGV4dDpcXG5cXG4ke3RleHR9YFxuICAgICAgfVxuICAgIF0sXG4gICAgbWF4X3Rva2VuczogMTAwLFxuICAgIHRlbXBlcmF0dXJlOiAwLjNcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjYWxsTWFudXNBSShyZXF1ZXN0KVxuICAgIGNvbnN0IHRhZ3NUZXh0ID0gcmVzcG9uc2UuY2hvaWNlc1swXT8ubWVzc2FnZT8uY29udGVudCB8fCAnJ1xuICAgIHJldHVybiB0YWdzVGV4dFxuICAgICAgLnNwbGl0KCcsJylcbiAgICAgIC5tYXAodGFnID0+IHRhZy50cmltKCkucmVwbGFjZSgvXiMvLCAnJykpXG4gICAgICAuZmlsdGVyKHRhZyA9PiB0YWcubGVuZ3RoID4gMClcbiAgICAgIC5zbGljZSgwLCA3KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGdlbmVyYXRlIEFJIHRhZ3MsIHVzaW5nIGZhbGxiYWNrOicsIGVycm9yKVxuICAgIC8vIEZhbGxiYWNrIHRhZyBnZW5lcmF0aW9uXG4gICAgcmV0dXJuIGdlbmVyYXRlRmFsbGJhY2tUYWdzKHRleHQpXG4gIH1cbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVGYWxsYmFja1RhZ3ModGV4dDogc3RyaW5nKTogc3RyaW5nW10ge1xuICBjb25zdCBsb3dlcmNhc2VUZXh0ID0gdGV4dC50b0xvd2VyQ2FzZSgpXG4gIGNvbnN0IHRhZ3M6IHN0cmluZ1tdID0gW11cbiAgXG4gIC8vIENvbW1vbiB0b3BpYyBrZXl3b3Jkc1xuICBjb25zdCB0b3BpY0tleXdvcmRzID0ge1xuICAgICdtZWV0aW5nJzogWydtZWV0aW5nJywgJ2Rpc2N1c3Npb24nXSxcbiAgICAncHJvamVjdCc6IFsncHJvamVjdCcsICd0YXNrJywgJ3dvcmsnXSxcbiAgICAnaWRlYSc6IFsnaWRlYScsICdjb25jZXB0JywgJ2JyYWluc3Rvcm0nXSxcbiAgICAnbm90ZSc6IFsnbm90ZScsICdyZW1lbWJlciddLFxuICAgICd0b2RvJzogWyd0b2RvJywgJ3Rhc2snLCAnYWN0aW9uJ10sXG4gICAgJ3Jlc2VhcmNoJzogWydyZXNlYXJjaCcsICdzdHVkeScsICdhbmFseXNpcyddLFxuICAgICdwZXJzb25hbCc6IFsncGVyc29uYWwnLCAnZGlhcnknLCAnam91cm5hbCddLFxuICAgICdidXNpbmVzcyc6IFsnYnVzaW5lc3MnLCAnY29tcGFueScsICdjb3Jwb3JhdGUnXSxcbiAgICAnZmluYW5jZSc6IFsnbW9uZXknLCAnZmluYW5jZScsICdidWRnZXQnLCAnY29zdCddLFxuICAgICd0ZWNoJzogWyd0ZWNobm9sb2d5JywgJ3NvZnR3YXJlJywgJ2NvZGUnLCAncHJvZ3JhbW1pbmcnXSxcbiAgICAnaGVhbHRoJzogWydoZWFsdGgnLCAnbWVkaWNhbCcsICd3ZWxsbmVzcyddLFxuICAgICd0cmF2ZWwnOiBbJ3RyYXZlbCcsICd0cmlwJywgJ3ZhY2F0aW9uJ10sXG4gICAgJ2Zvb2QnOiBbJ2Zvb2QnLCAncmVjaXBlJywgJ2Nvb2tpbmcnXSxcbiAgICAnbGVhcm5pbmcnOiBbJ2xlYXJuJywgJ2VkdWNhdGlvbicsICdjb3Vyc2UnXVxuICB9XG4gIFxuICAvLyBDaGVjayBmb3IgdG9waWMgbWF0Y2hlc1xuICBmb3IgKGNvbnN0IFt0YWcsIGtleXdvcmRzXSBvZiBPYmplY3QuZW50cmllcyh0b3BpY0tleXdvcmRzKSkge1xuICAgIGlmIChrZXl3b3Jkcy5zb21lKGtleXdvcmQgPT4gbG93ZXJjYXNlVGV4dC5pbmNsdWRlcyhrZXl3b3JkKSkpIHtcbiAgICAgIHRhZ3MucHVzaCh0YWcpXG4gICAgfVxuICB9XG4gIFxuICAvLyBFeHRyYWN0IHBvdGVudGlhbCB0YWdzIGZyb20gY2FwaXRhbCB3b3Jkc1xuICBjb25zdCBjYXBpdGFsV29yZHMgPSB0ZXh0Lm1hdGNoKC9cXGJbQS1aXVthLXpdK1xcYi9nKSB8fCBbXVxuICBjYXBpdGFsV29yZHMuZm9yRWFjaCh3b3JkID0+IHtcbiAgICBpZiAod29yZC5sZW5ndGggPiAzICYmICF0YWdzLmluY2x1ZGVzKHdvcmQudG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgIHRhZ3MucHVzaCh3b3JkLnRvTG93ZXJDYXNlKCkpXG4gICAgfVxuICB9KVxuICBcbiAgLy8gQWRkIHVyZ2VuY3kgdGFnc1xuICBpZiAoL3VyZ2VudHxpbXBvcnRhbnR8YXNhcHxkZWFkbGluZS9pLnRlc3QodGV4dCkpIHtcbiAgICB0YWdzLnB1c2goJ3VyZ2VudCcpXG4gIH1cbiAgXG4gIGlmICgvcXVlc3Rpb258aGVscHxhc2svaS50ZXN0KHRleHQpKSB7XG4gICAgdGFncy5wdXNoKCdxdWVzdGlvbicpXG4gIH1cbiAgXG4gIC8vIFJldHVybiB1cCB0byA1IHRhZ3NcbiAgcmV0dXJuIHRhZ3Muc2xpY2UoMCwgNSlcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN1Z2dlc3RUaXRsZSh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICBpZiAoIXRleHQgfHwgIXRleHQudHJpbSgpKSB7XG4gICAgdGhyb3cgbmV3IE1hbnVzQUlFcnJvcignVGV4dCBpcyByZXF1aXJlZCBmb3IgdGl0bGUgc3VnZ2VzdGlvbi4nKVxuICB9XG5cbiAgY29uc3QgcmVxdWVzdDogTWFudXNBSVJlcXVlc3QgPSB7XG4gICAgbWVzc2FnZXM6IFtcbiAgICAgIHtcbiAgICAgICAgcm9sZTogJ3N5c3RlbScsXG4gICAgICAgIGNvbnRlbnQ6ICdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQgdGhhdCBzdWdnZXN0cyBjb25jaXNlLCBkZXNjcmlwdGl2ZSB0aXRsZXMgZm9yIHRleHQgY29udGVudC4gUmV0dXJuIG9ubHkgdGhlIHRpdGxlLCBubyBhZGRpdGlvbmFsIHRleHQgb3IgZm9ybWF0dGluZy4nXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgIGNvbnRlbnQ6IGBTdWdnZXN0IGEgY29uY2lzZSB0aXRsZSBmb3IgdGhlIGZvbGxvd2luZyB0ZXh0OlxcblxcbiR7dGV4dC5zdWJzdHJpbmcoMCwgNTAwKX1gXG4gICAgICB9XG4gICAgXSxcbiAgICBtYXhfdG9rZW5zOiA1MCxcbiAgICB0ZW1wZXJhdHVyZTogMC40XG4gIH1cblxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNhbGxNYW51c0FJKHJlcXVlc3QpXG4gIHJldHVybiByZXNwb25zZS5jaG9pY2VzWzBdPy5tZXNzYWdlPy5jb250ZW50Py50cmltKCkgfHwgJ1VudGl0bGVkIE5vdGUnXG59Il0sIm5hbWVzIjpbImZldGNoIiwiTUFOVVNfQUlfQVBJX1VSTCIsIk1BTlVTX0FJX0FQSV9LRVkiLCJwcm9jZXNzIiwiZW52IiwiTWFudXNBSUVycm9yIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJyZXNwb25zZSIsIm5hbWUiLCJjYWxsTWFudXNBSSIsInJlcXVlc3QiLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJtb2RlbCIsIm9rIiwiZXJyb3JUZXh0IiwidGV4dCIsImNvbnNvbGUiLCJlcnJvciIsInN0YXR1c1RleHQiLCJjcmVhdGVGYWxsYmFja1Jlc3BvbnNlIiwiZGF0YSIsImpzb24iLCJ1c2VyTWVzc2FnZSIsIm1lc3NhZ2VzIiwiZmluZCIsIm0iLCJyb2xlIiwiY29udGVudCIsInN5c3RlbU1lc3NhZ2UiLCJmYWxsYmFja0NvbnRlbnQiLCJ0ZXh0VG9Qcm9jZXNzIiwiZXh0cmFjdFRleHRGcm9tTWVzc2FnZSIsImluY2x1ZGVzIiwiY3JlYXRlRmFsbGJhY2tTdW1tYXJ5IiwiY3JlYXRlRmFsbGJhY2tFeHBhbnNpb24iLCJjcmVhdGVGYWxsYmFja0ltcHJvdmVtZW50IiwiY3JlYXRlRmFsbGJhY2tUaXRsZSIsImNyZWF0ZUZhbGxiYWNrVHJhbnNsYXRpb24iLCJjcmVhdGVGYWxsYmFja0NoYXQiLCJpZCIsIkRhdGUiLCJub3ciLCJvYmplY3QiLCJjcmVhdGVkIiwiTWF0aCIsImZsb29yIiwiY2hvaWNlcyIsImluZGV4IiwiZmluaXNoX3JlYXNvbiIsInVzYWdlIiwicHJvbXB0X3Rva2VucyIsImNvbXBsZXRpb25fdG9rZW5zIiwidG90YWxfdG9rZW5zIiwicGF0dGVybnMiLCJwYXR0ZXJuIiwibWF0Y2giLCJ0cmltIiwiZXh0cmFjdGVkIiwicmVwbGFjZSIsImxlbmd0aCIsInNlbnRlbmNlcyIsInNwbGl0IiwiZmlsdGVyIiwicyIsImZpcnN0U2VudGVuY2UiLCJrZXlXb3JkcyIsImltcG9ydGFudFNlbnRlbmNlIiwic29tZSIsIndvcmQiLCJ0b0xvd2VyQ2FzZSIsImxhc3RTZW50ZW5jZSIsImNsZWFuVGV4dCIsImxvd2VyY2FzZVRleHQiLCJ3b3JkcyIsInciLCJrZXlXb3JkIiwiaW1wcm92ZWQiLCJ1bmlxdWVTZW50ZW5jZXMiLCJzZWVuIiwiU2V0Iiwic2VudGVuY2UiLCJub3JtYWxpemVkIiwiaGFzIiwiYWRkIiwicHVzaCIsImpvaW4iLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwidGVzdCIsInN1YnN0cmluZyIsImxhbmd1YWdlTWF0Y2giLCJ0YXJnZXRMYW5ndWFnZSIsInJlc3BvbnNlcyIsInJhbmRvbSIsInN1bW1hcml6ZVRleHQiLCJtYXhfdG9rZW5zIiwidGVtcGVyYXR1cmUiLCJleHBhbmRUZXh0IiwidHJhbnNsYXRlVGV4dCIsImltcHJvdmVUZXh0IiwiaW5zdHJ1Y3Rpb25zIiwiY2hhdFdpdGhBSSIsIm1hcCIsIm1zZyIsImdlbmVyYXRlVGFncyIsInRhZ3NUZXh0IiwidGFnIiwid2FybiIsImdlbmVyYXRlRmFsbGJhY2tUYWdzIiwidGFncyIsInRvcGljS2V5d29yZHMiLCJrZXl3b3JkcyIsIk9iamVjdCIsImVudHJpZXMiLCJrZXl3b3JkIiwiY2FwaXRhbFdvcmRzIiwiZm9yRWFjaCIsInN1Z2dlc3RUaXRsZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/manus.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/node-fetch","vendor-chunks/web-streams-polyfill","vendor-chunks/fetch-blob","vendor-chunks/formdata-polyfill","vendor-chunks/data-uri-to-buffer","vendor-chunks/node-domexception"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenai%2Fchat%2Froute&page=%2Fapi%2Fgenai%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenai%2Fchat%2Froute.ts&appDir=%2Fworkspaces%2F24005826G_lab2_V2%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspaces%2F24005826G_lab2_V2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();